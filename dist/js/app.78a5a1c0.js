(function(e){function t(t){for(var o,i,c=t[0],r=t[1],l=t[2],d=0,v=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);u&&u(t);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],o=!0,c=1;c<a.length;c++){var r=a[c];0!==n[r]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},n={app:0},s=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/-simulations2/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=r;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("db62")},2278:function(e,t,a){},3654:function(e,t,a){"use strict";a("caba")},"44dc":function(e,t,a){"use strict";a("2278")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("router-view")],1)},s=[],i=(a("034f"),a("2877")),c={},r=Object(i["a"])(c,n,s,!1,null,null,null),l=r.exports,u=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home py-6"},[a("div",{staticClass:"columns fullHeight"},[a("div",{staticClass:"column"},[a("cmp-form",{attrs:{form:e.form1,title:"Пул"}}),a("b-field",{attrs:{label:"prices:",grouped:"","group-multiline":""}},[e._l(e.prices,(function(t){return a("div",{key:t.name,staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-primary is-light",size:"is-medium"}},[e._v(e._s(t.name))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[e._v(e._s(t.value))])],1)],1)})),a("b-button",{attrs:{type:"is-primary",size:"is-small","icon-left":"border-color"},on:{click:function(t){e.priceModal=!0}}})],2)],1),a("div",{staticClass:"column"},[a("cmp-accounts-form",{attrs:{tokenOptions:e.config.tokens.concat([e.config.stable]),pricesFormat:e.pricesFormat,title:"Аккаунты"}})],1),a("div",{staticClass:"column"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Операции")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){return e.nextTick()}}},[e._v("Сделать шаг")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.createDepositModal=!0}}},[e._v("Сделать депозит")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.returnDepositModal=!0}}},[e._v("Вернуть депозит")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.mintModal=!0}}},[e._v("Выпуск стейбл")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.tradeModal=!0}}},[e._v("Обмен")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.borrowModal=!0}}},[e._v("Взять займ")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.repayModal=!0}}},[e._v("Вернуть займ ")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.liquidateModal=!0}}},[e._v("Ликвидация займа")])],1)])])]),a("div",{staticClass:"columns fullHeight"},[a("div",{staticClass:"column"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Результат")]),a("b-table",{attrs:{data:this.table,columns:e.columns}})],1),a("div",{staticClass:"column"},[a("h2",{staticClass:"is-size-4 mb-3 "},[e._v("История")]),a("div",{ref:"history",staticClass:"history"},e._l(e.history,(function(t,o){return a("div",{key:o},[e._v(" "+e._s(o)+") "+e._s(t)+" ")])})),0)])]),a("b-modal",{attrs:{width:640},model:{value:e.tokenModal,callback:function(t){e.tokenModal=t},expression:"tokenModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"})])]),a("b-modal",{attrs:{width:440},model:{value:e.priceModal,callback:function(t){e.priceModal=t},expression:"priceModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("cmp-form",{attrs:{form:e.prices,title:"Prices"}})],1)])]),a("b-modal",{attrs:{width:440},model:{value:e.createDepositModal,callback:function(t){e.createDepositModal=t},expression:"createDepositModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Сделать депозит")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},model:{value:e.createDepositInfo.account,callback:function(t){e.$set(e.createDepositInfo,"account",t)},expression:"createDepositInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("token")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"number"},model:{value:e.createDepositInfo.value,callback:function(t){e.$set(e.createDepositInfo,"value",t)},expression:"createDepositInfo.value"}}),e.poolAccounts[e.createDepositInfo.account]?e._l(e.poolAccounts[e.createDepositInfo.account].balance,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":o},model:{value:e.createDepositInfo.token,callback:function(t){e.$set(e.createDepositInfo,"token",t)},expression:"createDepositInfo.token"}},[e._v(" "+e._s(o)+" "+e._s(t)+" ")])],1)})):e._e()],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("Внести "+e._s(e.createDepositInfo.tokenInput)),a("br"),e._v(" "+e._s(e.createDepositInfo.token)+" от аккаунта №"+e._s(e.createDepositInfo.account+1)+" в депозит")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.createDeposit(e.createDepositInfo),e.createDepositModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:440},model:{value:e.returnDepositModal,callback:function(t){e.returnDepositModal=t},expression:"returnDepositModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Вернуть депозит")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(t){return e.setReturnOptionToDeposit(o)}},model:{value:e.returnDeposit.account,callback:function(t){e.$set(e.returnDeposit,"account",t)},expression:"returnDeposit.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("token")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"number"},model:{value:e.returnDepositInfo.value,callback:function(t){e.$set(e.returnDepositInfo,"value",t)},expression:"returnDepositInfo.value"}}),e._l(e.returnDepositInfo.options,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":t.name},model:{value:e.returnDepositInfo.token,callback:function(t){e.$set(e.returnDepositInfo,"token",t)},expression:"returnDepositInfo.token"}},[e._v(" "+e._s(t.name)+" "+e._s(t.value)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("Вывести "+e._s(e.returnDepositInfo.tokenInput)),a("br"),e._v(" "+e._s(e.returnDepositInfo.token)+" от аккаунта №"+e._s(e.returnDepositInfo.account+1)+" на личный баланс")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.returnDeposit(e.returnDepositInfo),e.returnDepositModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:e.borrowModal,callback:function(t){e.borrowModal=t},expression:"borrowModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Взять займ")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(t){return e.setReturnOptionToBorrow(o,e.borrowInfo.token)}},model:{value:e.borrowInfo.account,callback:function(t){e.$set(e.borrowInfo,"account",t)},expression:"borrowInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("you get (max - "+e._s(e.borrowInfo.maxBorrow)+")")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"number"},model:{value:e.borrowInfo.value,callback:function(t){e.$set(e.borrowInfo,"value",t)},expression:"borrowInfo.value"}}),e._l(e.borrowInfo.options,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":t},nativeOn:{click:function(a){return e.setReturnOptionToBorrow(e.borrowInfo.account,t)}},model:{value:e.borrowInfo.token,callback:function(t){e.$set(e.borrowInfo,"token",t)},expression:"borrowInfo.token"}},[e._v(" "+e._s(t)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("Обеспеченность займа: 200% ")]),a("h2",{staticClass:"is-size-6"},[e._v("Занять "),a("br"),e._v(" "+e._s(e.borrowInfo.payValue)+" "+e._s(e.borrowInfo.token)+" "),a("br"),e._v(" аккаунту №"+e._s(e.borrowInfo.account+1))]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.borrow(e.borrowInfo),e.borrowModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:e.mintModal,callback:function(t){e.mintModal=t},expression:"mintModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Выпуск стейблкоинов")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(t){return e.setMaxToMint(o,e.mintInfo.token)}},model:{value:e.mintInfo.account,callback:function(t){e.$set(e.mintInfo,"account",t)},expression:"mintInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("you get (max - "+e._s(e.mintInfo.maxMint)+")")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"number"},model:{value:e.mintInfo.value,callback:function(t){e.$set(e.mintInfo,"value",t)},expression:"mintInfo.value"}}),e._l(e.mintInfo.options,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":t},nativeOn:{click:function(a){return e.setReturnOptionToBorrow(e.mintInfo.account,t)}},model:{value:e.mintInfo.token,callback:function(t){e.$set(e.mintInfo,"token",t)},expression:"mintInfo.token"}},[e._v(" "+e._s(t)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v(" Выпустить для аккаунта №"+e._s(e.mintInfo.account+1)+" "+e._s(e.mintInfo.token)+" "+e._s(e.mintInfo.value)+" ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.mint(e.mintInfo),e.mintModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:e.tradeModal,callback:function(t){e.tradeModal=t},expression:"tradeModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Обмен")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-3"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},model:{value:e.tradeInfo.account,callback:function(t){e.$set(e.tradeInfo,"account",t)},expression:"tradeInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-6"},[a("div",{staticStyle:{width:"50%"}},[a("h2",{staticClass:"is-size-6"},[e._v("you get")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"number"},model:{value:e.tradeInfo.value,callback:function(t){e.$set(e.tradeInfo,"value",t)},expression:"tradeInfo.value"}})],1),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[e.poolAccounts[e.tradeInfo.account]?e._l(e.poolAccounts[e.tradeInfo.account].balance,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":o},model:{value:e.tradeInfo.token,callback:function(t){e.$set(e.tradeInfo,"token",t)},expression:"tradeInfo.token"}},[e._v(" "+e._s(o)+" "+e._s(t)+" ")])],1)})):e._e()],2),a("div",{staticClass:"column is-6"},e._l(e.tradeInfo.options,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token2","native-value":t},model:{value:e.tradeInfo.token2,callback:function(t){e.$set(e.tradeInfo,"token2",t)},expression:"tradeInfo.token2"}},[e._v(" "+e._s(t)+" ")])],1)})),0)])]),a("div",{staticClass:"column is-3"},[a("h2",{staticClass:"is-size-6"},[e._v(" Обменять для аккаунта №"+e._s(e.tradeInfo.account+1)+" "+e._s(e.tradeInfo.token)+" "+e._s(e.tradeInfo.value)+" на "+e._s(e.tradeInfo.token2)+" ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.trade(e.tradeInfo),e.tradeModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:e.repayModal,callback:function(t){e.repayModal=t},expression:"repayModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Вернуть займ")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(t){e.setRepayAccountInfo(parseInt(o))}},model:{value:e.repayInfo.account,callback:function(t){e.$set(e.repayInfo,"account",t)},expression:"repayInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("token")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"text"},model:{value:e.repayInfo.value,callback:function(t){e.$set(e.repayInfo,"value",t)},expression:"repayInfo.value"}}),e._l(e.repayInfo.borrows,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":t.name},model:{value:e.repayInfo.token,callback:function(t){e.$set(e.repayInfo,"token",t)},expression:"repayInfo.token"}},[e._v(" "+e._s(t.name)+" - "+e._s(t.value)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6"},[e._v("loan: 1200 ETH for 12 BTC")]),a("h2",{staticClass:"is-size-6"},[e._v("срок: 12 мес")]),a("h2",{staticClass:"is-size-6"},[e._v("к возврату: "+e._s(e.repayInfo.sumBorrowPlusEffects)+" ETH")]),a("h2",{staticClass:"is-size-6"},[e._v("обеспечение: "+e._s(e.repayInfo.sumCollateral)+" BTC")]),a("h3",{staticClass:"is-size-8"},[e._v(" Вернуть займ аккаунта №"+e._s(e.repayInfo.account+1)+" в размере 1300 ЕTH и вернуть 13 BTC "+e._s(e.repayInfo.payValue)+" "+e._s(e.repayInfo.token)+" "),a("br")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.repay(e.repayInfo),e.repayModal=!1}}},[e._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:740},model:{value:e.liquidateModal,callback:function(t){e.liquidateModal=t},expression:"liquidateModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v("Ликвидация займа")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6"},[e._v("account")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(t){e.setMaxLiquidate(parseInt(o),e.liquidateInfo.token)}},model:{value:e.liquidateInfo.account,callback:function(t){e.$set(e.liquidateInfo,"account",t)},expression:"liquidateInfo.account"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6"},[e._v("token max("+e._s(e.liquidateInfo.maxLiquidate)+")")]),a("b-input",{staticClass:"is-flex-grow-2",attrs:{type:"text"},model:{value:e.liquidateInfo.value,callback:function(t){e.$set(e.liquidateInfo,"value",t)},expression:"liquidateInfo.value"}}),e.poolAccounts[e.createDepositInfo.account]?e._l(e.poolAccounts[e.liquidateInfo.account].balance,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":o},nativeOn:{click:function(a){return e.setMaxLiquidate(e.liquidateInfo.account,t)}},model:{value:e.liquidateInfo.token,callback:function(t){e.$set(e.liquidateInfo,"token",t)},expression:"liquidateInfo.token"}},[e._v(" "+e._s(o)+" ")])],1)})):e._e()],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6"},[e._v("account2")]),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account2","native-value":parseInt(o)},model:{value:e.liquidateInfo.account2,callback:function(t){e.$set(e.liquidateInfo,"account2",t)},expression:"liquidateInfo.account2"}},[e._v(" №"+e._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6"},[e._v("token2")]),e.poolAccounts[e.liquidateInfo.account2]?e._l(e.poolAccounts[e.liquidateInfo.account2].balance,(function(t,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token2","native-value":o},model:{value:e.liquidateInfo.token2,callback:function(t){e.$set(e.liquidateInfo,"token2",t)},expression:"liquidateInfo.token2"}},[e._v(" "+e._s(o)+" "+e._s(t)+" ")])],1)})):e._e()],2),a("div",{staticClass:"column is-4"},[a("h3",{staticClass:"is-size-8"},[e._v(" Ликвидировать займ аккаунта №"+e._s(e.liquidateInfo.account+1)+" и перевести 1200 "+e._s(e.liquidateInfo.token)+" в пул ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(t){e.liquidate(e.liquidateInfo),e.liquidateModal=!1}}},[e._v("Подтвердить")])],1)])])])])],1)},v=[],p=(a("99af"),a("4160"),a("b0c0"),a("d3b7"),a("25f0"),a("159b"),a("5530")),f=a("2f62"),m={tokens:["BTC","ETH","USDT","EOS"],stable:["sUSD"],tradeFee:1,baseMultiplier:2,baseRate:5,reserveFactor:.1,collateralFactor:.5,closeFactor:.5,liquidationIncentive:.97,penaltyCoefficient:.1,prices:{BTC:10500,ETH:350,USDT:1,EOS:2,sUSD:1}},b=m,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v(e._s(e.title))]),e._l(e.form,(function(t){return a("b-field",{key:t.name,attrs:{label:t.name+":",horizontal:""}},[a("div",{staticClass:"is-flex is-align-items-center"},[t.options?a("v-select",{staticClass:"is-flex-grow-2",attrs:{multiple:"",options:t.options},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):t.exstraOption?a("div"):a("b-input",{staticClass:"is-flex-grow-2",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),t.tooltip?a("b-tooltip",{staticClass:"control ml-2",attrs:{label:t.tooltip,multilined:""}},[a("b-icon",{attrs:{icon:"help-circle-outline"}})],1):e._e()],1)])}))],2)},g=[],w={props:["title","form"]},_=w,k=Object(i["a"])(_,h,g,!1,null,null,null),I=k.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("h2",{staticClass:"is-size-4 mb-3"},[e._v(e._s(e.title))]),a("div",{staticClass:"accountsFrom__scroll"}),e._l(e.poolAccounts,(function(t,o){return a("div",{key:o,staticClass:"mb-4",attrs:{grouped:"","group-multiline":""}},[a("div",[a("span",[e._v("№"+e._s(1+parseInt(o))+" Balance:")]),a("b-button",{staticClass:"ml-3",attrs:{size:"is-small","icon-left":"plus"},on:{click:function(t){return e.openEditModal(o)}}})],1),a("div",{staticClass:"is-flex is-flex-wrap-wrap"},e._l(t.balance,(function(t,o){return a("div",{key:t.name,staticClass:"control mr-4"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-primary is-light",size:"is-medium"}},[e._v(e._s(o))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[e._v(e._s(t))])],1)],1)})),0)])})),a("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.openEditModal(-1)}}},[e._v("add account")]),a("b-modal",{attrs:{width:440},model:{value:e.accountModal,callback:function(t){e.accountModal=t},expression:"accountModal"}},[e.accountModal?a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("cmp-account-form",{attrs:{title:"test",i:e.currentAccountindex,pricesFormat:e.pricesFormat}})],1)]):e._e()])],2)},C=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[e.i<0?a("h2",{staticClass:"is-size-4 mb-3"},[e._v("new account")]):a("h2",{staticClass:"is-size-4 mb-3"},[e._v(" account "+e._s(e.i+1))]),e._l(e.currentAccount,(function(t){return a("div",{key:t.name,staticClass:"is-flex is-align-items-center mb-4"},[a("b-checkbox",{staticClass:"is-flex-grow-0",model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(" "+e._s(t.name+":")+" ")]),a("b-input",{staticClass:"is-flex-grow-2",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),t.tooltip?a("b-tooltip",{staticClass:"control ml-2",attrs:{label:t.tooltip,multilined:""}},[a("b-icon",{attrs:{icon:"help-circle-outline"}})],1):e._e()],1)})),e.i<0?a("b-button",{attrs:{type:"is-primary"},on:{click:function(t){e.addBalanceToAccount({data:e.currentAccountFormat,pricesFormat:e.pricesFormat}),e.$parent.close()}}},[e._v(" Create account ")]):[a("b-button",{attrs:{type:"is-primary"},on:{click:function(t){e.addBalanceToAccount({data:e.currentAccountFormat,pricesFormat:e.pricesFormat,i:e.i}),e.$parent.close()}}},[e._v(" Add coins ")])]],2)},x=[],j=(a("d81d"),{props:["title","i","pricesFormat"],data:function(){return{currentAccount:[{name:"",value:0,checked:!1}],defaultAccount:[{name:"BTC",value:100,checked:!1},{name:"ETH",value:100,checked:!1},{name:"USDT",value:100,checked:!1},{name:"EOS",value:100,checked:!1},{name:"sUSD",value:100,checked:!1}]}},computed:Object(p["a"])(Object(p["a"])({},Object(f["e"])("accounts",{accounts:"items",poolAccounts:"poolAccounts"})),{},{currentAccountFormat:function(){var e={};return this.currentAccount.forEach((function(t){t.checked&&(e[t.name]=t.value)})),e}}),methods:Object(p["a"])(Object(p["a"])({},Object(f["b"])("accounts",["saveItem","deleteItem","addBalanceToAccount"])),{},{unformat:function(e){console.log("data",e);var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push({name:a,value:e[a].toString(),checked:!0});return t}}),created:function(){console.log("created",this.i),this.i<0?this.currentAccount=this.defaultAccount.map((function(e){return e})):this.currentAccount=this.unformat(this.poolAccounts[this.i].balance),console.log("this.currentAccount",this.currentAccount)}}),B=j,M=Object(i["a"])(B,O,x,!1,null,null,null),A=M.exports,T={props:{title:{default:""},tokenOptions:{default:[]},pricesFormat:{default:{}}},components:{"cmp-account-form":A},data:function(){return{accountModal:!1,currentAccount:{},currentAccountindex:-1}},computed:Object(p["a"])(Object(p["a"])({},Object(f["e"])("accounts",["poolAccounts"])),Object(f["c"])("accounts",{accountsChecked:"itemsChecked"})),methods:{openEditModal:function(e){this.accountModal=!0,this.currentAccountindex=e}}},D=T,q=(a("44dc"),Object(i["a"])(D,y,C,!1,null,null,null)),F=q.exports;console.log();var R={name:"Home",components:{"cmp-form":I,"cmp-accounts-form":F},data:function(){return{tokenModal:!1,priceModal:!1,createDepositModal:!1,createDepositInfo:{account:0,value:0,token:""},returnDepositModal:!1,returnDepositInfo:{account:0,value:0,token:"",options:[]},borrowModal:!1,borrowInfo:{account:0,value:0,token:"",options:b.tokens,maxBorrow:0},mintModal:!1,mintInfo:{account:0,value:0,token:"",options:b.stable,maxMint:0},tradeModal:!1,tradeInfo:{account:0,value:0,token:"",token2:"",options:b.tokens,maxMint:0},repayModal:!1,repayInfo:{account:0,value:0,getValue:0,borrows:[],token:"",depositsToken:"",sumCollateral:0,sumBorrowPlusEffects:0},liquidateModal:!1,liquidateInfo:{account:0,account2:0,value:0,maxLiquidate:0,options:b.tokens,borrows:0,token:"",token2:""},form1:[{name:"tokens",value:b.tokens,options:b.tokens,tooltip:"Изменить список токенов в пуле"},{name:"stable",value:b.stable,options:b.stable,tooltip:"Изменить список стейбл коинов в пуле"},{name:"tradeFee",value:b.tradeFee},{name:"baseRate",value:b.baseRate},{name:"reserveFactor",value:b.reserveFactor},{name:"collateralFactor",value:b.collateralFactor},{name:"closeFactor",value:b.closeFactor},{name:"liquidationIncentive",value:b.liquidationIncentive},{name:"penaltyCoefficient",value:b.penaltyCoefficient}],table:[],columns:[{field:"name",label:"name"},{field:"value",label:"value"},{field:"totalBorrows",label:"totalBorrows"},{field:"borrowIndex",label:"borrowIndex"},{field:"totalReserves",label:"totalReserves"},{field:"price",label:"price"},{field:"capital",label:"capital"},{field:"weight",label:"weight"},{field:"staked",label:"staked"},{field:"prevDay",label:"prevDay"}],credit:[{name:"tokens loan",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет, которые \n            принимаются в качестве \n            депозита под обеспечение \n            займа"},{name:"tokens dep",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет которые\n            принимаются в качестве \n            депозита под обеспечение \n            займа"},{name:"minimum ratio:",value:""},{name:"liquidation penalty",value:""},{name:"stability fee",value:""},{name:"кол-во займов",value:""},{name:"процент возврата",value:""}],bargaining:[{name:"tokens",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет которые\n            могут участвовать в \n            торгах"},{name:"fee",value:""},{name:"baseRate",value:""},{name:"кол-во торгов",value:""}],prices:[{name:"BTC",value:10500},{name:"ETH",value:350},{name:"USDT",value:1},{name:"EOS",value:2},{name:"sUSD",value:1}],history:[]}},computed:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(f["e"])("accounts",{accounts:"items",poolAccounts:"poolAccounts"})),Object(f["c"])("accounts",{accountsChecked:"itemsChecked"})),{},{pricesFormat:function(){var e={};return this.prices.forEach((function(t){e[t.name]=t.value})),e},config:function(){var e={};return this.form1.forEach((function(t){e[t.name]=t.value})),console.log("config 1 ",e),e}}),watch:{config:function(e){window.pool.createPool(e),window.oracle.init(e)},pricesFormat:function(){this.updateResults()},history:function(){this.$refs.history.scrollTo({top:this.$refs.history.scrollHeight,behavior:"smooth"})},returnDepositModal:function(e){e&&this.setReturnOptionToDeposit(this.returnDeposit.account)},borrowModal:function(e){e&&this.setReturnOptionToBorrow(this.borrowInfo.account,this.borrowInfo.token)},mintModal:function(e){e&&this.setMaxToMint(this.mintInfo.account,this.mintInfo.token)},repayModal:function(e){e&&this.setRepayAccountInfo(this.repayInfo.account)},liquidateModal:function(e){e&&this.setMaxLiquidate(this.liquidateInfo.account,this.liquidateInfo.token)}},methods:Object(p["a"])(Object(p["a"])(Object(p["a"])({},Object(f["d"])("accounts",{accountEdit:"editItem"})),Object(f["b"])("accounts",["updateAccounts"])),{},{Create:function(){window.oracle.init(b),window.pool.createPool(b)},updateResults:function(){var e=window.pool.getInfo(this.pricesFormat);this.table=[];var t=e.reserves;for(var a in this.updateAccounts(this.pricesFormat),t)if(Object.prototype.hasOwnProperty.call(t,a)){var o={};for(var n in o.name=a,t[a])Object.prototype.hasOwnProperty.call(t,a)&&(o[n]=t[a][n].toString());this.table.push(o)}console.log(this.table)},nextTick:function(){window.pool.tick(1),this.updateResults(),this.history.push("pool tick")},createDeposit:function(e){window.pool.deposit(e.account,{name:e.token,value:e.value}),this.updateResults(),this.history.push("создан депозит для аккаунта №".concat(e.account+1," на сумму ").concat(e.token," ").concat(e.value))},setReturnOptionToDeposit:function(e){var t=window.pool.accounts.get(e).balance,a=[];for(var o in t)a.push({name:o,value:t[o].toString()});this.$set(this.returnDepositInfo,"options",a)},returnDeposit:function(e){window.pool.redeem(e.account,e.token,e.value),this.updateResults(),this.history.push("возврат депозита для аккаунта №".concat(e.account+1," на сумму ").concat(e.token," ").concat(e.value))},setReturnOptionToBorrow:function(e,t){console.log("getMaxBorrow",window.pool.getMaxBorrow(e,t)),this.borrowInfo.maxBorrow=window.pool.getMaxBorrow(e,t)},borrow:function(e){window.pool.borrow(e.account,{name:e.token,borrowAmount:e.value}),this.updateResults(),this.history.push("аккаунт №".concat(e.account+1," взял займ на сумму ").concat(e.token," ").concat(e.value))},repay:function(e){window.pool.repay(e.account,e.token,e.value),this.updateResults(),this.history.push("аккаунт №".concat(e.account+1," вернул займ на сумму ").concat(e.token," ").concat(e.value))},setRepayAccountInfo:function(e){var t=window.pool.getInfo(this.pricesFormat).accounts[e];for(var a in console.log(t.borrows),this.repayInfo.borrows=[],t.borrows)Object.prototype.hasOwnProperty.call(t.borrows,a)&&this.repayInfo.borrows.push({name:a,value:t.borrows[a].value?t.borrows[a].value.toString():""})},setMaxLiquidate:function(e,t){this.liquidateInfo.maxLiquidate=window.pool.getLiqudationMax(e,t)},liquidate:function(e){window.pool.liquidate(e.account,e.token,e.value,e.token2,e.account2),this.updateResults(),this.history.push("аккаунт №".concat(e.account2+1," ликвидировал займ ").concat(e.token2," на сумму ").concat(e.token," ").concat(e.value," аккаунту №").concat(e.account+1))},setMaxToMint:function(e,t){this.mintInfo.maxMint=window.pool.getMaxMint(e,t)},mint:function(e){window.pool.mint(e.account,{name:e.token,borrowAmount:e.value}),this.history.push("аккаунт №".concat(e.account+1," выпустил стейбл коины на сумму ").concat(e.token," ").concat(e.value)),this.updateResults()},trade:function(e){console.log(e.account,["".concat(e.token,"/").concat(e.token2),parseFloat(e.value)]);var t=window.pool.tradePool(e.account,["".concat(e.token,"/").concat(e.token2),parseFloat(e.value)]);this.updateResults(),console.log(t),this.$buefy.toast.open("вы получили ".concat(t.name," ").concat(t.value)),this.history.push("аккаунт №".concat(e.account+1," обменял ").concat(e.token," / ").concat(e.token2," на сумму ").concat(e.value," (получил ").concat(t.name," ").concat(t.value,")"))}}),created:function(){this.Create()}},z=R,S=(a("3654"),Object(i["a"])(z,d,v,!1,null,null,null)),E=S.exports;o["a"].use(u["a"]);var P=[{path:"/",name:"Home",component:E}],$=new u["a"]({routes:P}),W=$,H=(a("4de4"),a("a434"),a("b64b"),{namespaced:!0,state:{items:[[]],poolAccounts:[]},getters:{itemsChecked:function(e){return e.items.map((function(e){return e.filter((function(e){return e.checked}))}))}},mutations:{createItem:function(e,t){e.items.push(t)},editItem:function(e,t){var a=t.i;console.log(a),e.items.splice(a,1,t.data)},deleteItem:function(e,t){e.items.splice(t,1)},setInfo:function(e,t){e.poolAccounts=t}},actions:{saveItem:function(e,t){var a=e.commit;console.log(t),void 0!=t.i?(console.log("editItem",t.i),a("editItem",t)):(console.log("createItem"),a("createItem",t.data))},deleteItem:function(e,t){var a=e.commit;a("deleteItem",t)},addBalanceToAccount:function(e,t){var a=e.state,o=e.dispatch,n=t.i,s=t.data,i=t.pricesFormat;n?window.pool.accounts.issueBalance(n,s):window.pool.accounts.issueBalance(Object.keys(a.poolAccounts).length,s),o("updateAccounts",i)},updateAccounts:function(e,t){var a=e.commit;console.log(window.pool.getInfo(t).accounts),a("setInfo",window.pool.getInfo(t).accounts)}}});o["a"].use(f["a"]);var V=new f["a"].Store({state:{},mutations:{},actions:{},modules:{accounts:H}}),L=(a("c975"),a("13d5"),a("b680"),a("ac1f"),a("1276"),a("4c53"),a("b85c")),U=a("3835"),N=a("d4ec"),K=a("ade3"),X=a("4128"),J=a.n(X);a("4fad"),a("07ac");var G=function e(){var t=this;Object(N["a"])(this,e),Object(K["a"])(this,"get",(function(e){return t.accounts[e]||(t.accounts[e]={borrows:{},deposits:{},balance:{},dao:{importance:new J.a(0),dTokens:new J.a(0),delegators:[]}}),t.accounts[e]})),Object(K["a"])(this,"all",(function(){return t.accounts})),Object(K["a"])(this,"values",(function(){return Object.values(t.accounts)})),Object(K["a"])(this,"addDeposit",(function(e,a,o,n,s){if(t.get(e).deposits[a]){var i=t.get(e).deposits[a];i.value=i.value.plus(o),i.share=i.share.plus(n),i.capital=i.capital.plus(new J.a(o).times(s))}else t.get(e).deposits[a]={value:new J.a(o),share:n,capital:new J.a(o).times(s)}})),Object(K["a"])(this,"removeDeposit",(function(e,a,o,n,s){if(t.get(e).deposits[a]){var i=t.get(e).deposits[a],c=i.value.times(J.a.div(n,i.share));i.value=i.value.minus(c),i.share=i.share.minus(n),i.capital=i.capital.minus(new J.a(c).times(s))}})),Object(K["a"])(this,"getDeposit",(function(e,a){return t.get(e).deposits[a]})),Object(K["a"])(this,"setBorrow",(function(e,a,o,n){if(t.get(e).borrows[a]){var s=t.get(e).borrows[a];s.value=o,s.interestIndex=n}else t.get(e).borrows[a]={value:new J.a(o),interestIndex:new J.a(n)}})),Object(K["a"])(this,"countBorrow",(function(e,a,o){var n=t.get(e);if(!n.borrows[a]||n.borrows[a].value.eq(0))return new J.a(0);var s=n.borrows[a].value.times(o);return s.div(n.borrows[a].interestIndex)})),Object(K["a"])(this,"issueBalance",(function(e,a){Object.entries(a).forEach((function(a){var o=Object(U["a"])(a,2),n=o[0],s=o[1];t.get(e).balance[n]?t.get(e).balance[n]=t.get(e).balance[n].plus(s):t.get(e).balance[n]=new J.a(s)}))})),Object(K["a"])(this,"addBalance",(function(e,a,o){t.get(e).balance[a]?t.get(e).balance[a]=t.get(e).balance[a].plus(o):t.get(e).balance[a]=new J.a(o)})),Object(K["a"])(this,"subBalance",(function(e,a,o){var n=t.get(e).balance;return n[a]&&n[a].gte(o)?(t.get(e).balance[a]=n[a].minus(o),!0):(console.log("Not enough balance to spend ".concat(o," ").concat(a)),!1)})),Object(K["a"])(this,"forEach",(function(e){for(var a in t.accounts)t.accounts.hasOwnProperty(a)&&e(t.accounts[a],a,t.accounts)})),this.accounts={}},Q=G,Y=function e(t){var a=this;Object(N["a"])(this,e),Object(K["a"])(this,"get",(function(e){return a.reserves[e]||(a.reserves[e]={value:new J.a(0),totalBorrows:new J.a(0),borrowIndex:a.config.dayRate,totalReserves:new J.a(0),price:new J.a(0),capital:new J.a(0),weight:new J.a(0),staked:new J.a(0),prevDay:new J.a(a.config.day)}),a.reserves[e]})),Object(K["a"])(this,"all",(function(){return a.reserves})),Object(K["a"])(this,"addValue",(function(e,t){a.get(e).value=a.get(e).value.plus(t)})),Object(K["a"])(this,"setPrice",(function(e,t){a.get(e).price=new J.a(t)})),Object(K["a"])(this,"getValue",(function(e){return a.get(e).value})),Object(K["a"])(this,"getValueWithBorrows",(function(e){return a.get(e).value.plus(a.get(e).totalBorrows)})),Object(K["a"])(this,"getPrice",(function(e){return a.get(e).price})),Object(K["a"])(this,"getCapital",(function(e){return a.get(e).value.times(a.get(e).price)})),Object(K["a"])(this,"getLiquidCapital",(function(){return Object.keys(a.all()).map((function(e){return a.getCapital(e)})).reduce((function(e,t){return new J.a(e).plus(new J.a(t))}))})),Object(K["a"])(this,"getBorrowedCapital",(function(){return Object.keys(a.all()).map((function(e){return a.get(e).totalBorrows.times(a.get(e).price)})).reduce((function(e,t){return new J.a(e).plus(new J.a(t))}))})),Object(K["a"])(this,"getFullCapital",(function(){return a.getLiquidCapital().plus(a.getBorrowedCapital())})),this.config=t,this.reserves={}},Z=Y,ee=365,te=function e(){var t=this;Object(N["a"])(this,e),Object(K["a"])(this,"createPool",(function(e){t.config=e,t.sTokens={},t.history=[],t.day=1,t.fees={tradeFee:new J.a(e.tradeFee)},t.stabFund={},t.collateralFactor=new J.a(t.config.collateralFactor),t.dayRate=new J.a(t.config.baseRate).div(ee),t.dayMultiplier=new J.a(t.config.baseMultiplier).div(ee),t.reserveFactor=new J.a(t.config.reserveFactor).div(ee),t.accounts=new Q,t.reserves=new Z({day:t.day,dayRate:t.dayRate}),t.dynamicParams={stabPercentage:new J.a(30),closeFactor:new J.a(t.config.closeFactor),penaltyCoefficient:new J.a(t.config.penaltyCoefficient)},t.tickCallbacks=[],e.prices&&t.setPrices(e.prices)})),Object(K["a"])(this,"tick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.day+=e,t._updateIndexesAll(),t._updateAccountsIndex(),t.tickCallbacks.forEach((function(t){return t(e)}))})),Object(K["a"])(this,"addTicker",(function(e){t.tickCallbacks.push(e)})),Object(K["a"])(this,"redeem",(function(e,a,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t._updateIndexes(a);var i=t.accounts.getDeposit(e,a);if(!i||i.share.lessThan(o))return{error:{message:"deposit not found or not enough share"},currentShare:i&&i.share,specifiedShare:o};var c=t._liquidateShareAmount(o,a);if(c.value.lessThan(n))return{error:{message:"Return is less than specified minimum",maxReturn:c.value,minReturn:n}};var r=J.a.div(o,i.share);if(c.value.lessThan(i.value.mul(r))&&!s){var l=c.value.div(i.value),u=l.sqrt().mul(2).div(l.plus(1)).minus(1);return console.log(u),{error:{message:"Redeem with loss",output:c.value,loss:u}}}return!0!==t.accounts.subBalance(e,"x"+a,o)?{error:{message:"Not enough xTokens for redeem",token:"x"+a,need:o}}:(t._removeAccountDeposit(e,a,c.value,o),t.reserves.get(a).staked=t.reserves.get(a).staked.minus(c.value),t._countWeights(),t._updateAccountsIndex(),t.accounts.addBalance(e,c.name,c.value),c)})),Object(K["a"])(this,"redeemAll",(function(e,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=t.accounts.getDeposit(e,a);return!s||s.share.equals(0)?{error:{message:"deposit not found"}}:t.redeem(e,a,s.share,o,n)})),Object(K["a"])(this,"deposit",(function(e,a){var o=a.name,n=a.value;if(!0!==t.accounts.subBalance(e,o,n))return console.log("Insifficient balance for deposit"),{name:"x"+o,value:0};var s=t._addAccountDeposit(e,o,n);return t.reserves.get(o).staked=t.reserves.get(o).staked.plus(n),t._countWeights(),t._updateIndexes(o),t._updateAccountsIndex(),t.accounts.addBalance(e,"x"+o,s),{name:"x"+o,value:s}})),Object(K["a"])(this,"getInfo",(function(){return{accounts:t.accounts.all(),reserves:t.reserves.all(),sTokens:t.sTokens,capital:t.reserves.getFullCapital(),stabFund:t.stabFund,prices:t._getPrices()}})),Object(K["a"])(this,"borrow",(function(e,a){var o=a.name,n=a.borrowAmount;t._updateIndexes(o);var s=t._checkBorrow(e,o,n),i=Object(U["a"])(s,2),c=(i[0],i[1]),r=t.reserves.get(o);if(c>0)console.log("not enough collateral");else if(r.value.lt(n))console.log("not enough reserve ".concat(o));else{var l=t.accounts.countBorrow(e,o,r.borrowIndex),u=l.plus(n);t.accounts.setBorrow(e,o,u,r.borrowIndex),r.value=r.value.minus(n),r.totalBorrows=r.totalBorrows.plus(n),t.accounts.addBalance(e,o,n),t._countWeights(),t._updateAccountsIndex()}})),Object(K["a"])(this,"mint",(function(e,a){var o=a.name,n=a.borrowAmount;if(-1!==t.config.stable.indexOf(o)){t._updateIndexes(o);var s=t._checkBorrow(e,o,n),i=Object(U["a"])(s,2),c=(i[0],i[1]),r=t.reserves.get(o);if(c>0)console.log("not enough collateral");else{var l=t.accounts.countBorrow(e,o,r.borrowIndex),u=l.plus(n),d=r.totalBorrows.plus(n);t.accounts.setBorrow(e,o,u,r.borrowIndex),r.totalBorrows=d,t.accounts.addBalance(e,o,n),t._countWeights(),t._updateAccountsIndex()}}else console.log("this token is not stable")})),Object(K["a"])(this,"burn",(function(e,a,o){if(-1!==t.config.stable.indexOf(a)){t._updateIndexes(a);var n=t.reserves.get(a),s=t.accounts.countBorrow(e,a,n.borrowIndex),i=o,c=s.minus(i),r=n.totalBorrows.minus(i);t.accounts.setBorrow(e,a,c,n.borrowIndex),t.accounts.subBalance(e,a,i),n.totalBorrows=r,t._countWeights(),t._updateAccountsIndex()}else console.log("this token is not stable")})),Object(K["a"])(this,"liquidateStable",(function(e,a,o,n,s){if(-1!==t.config.stable.indexOf(a)){t._updateIndexesAll();var i=t._liquidateBorrowAllowed(e,a);if(i.lessThan(0)||i.equals(0))console.log("liquidation not allowed");else{var c=t._liquidateCalculateSeizeTokens(a,n,o),r=t.dynamicParams.penaltyCoefficient.times(c);if(t.accounts.getDeposit(e,n).share.lt(c.plus(r)))console.log("borrower not enough collateral");else if(t.accounts.get(s).balance[a]&&!t.accounts.get(s).balance[a].lt(o)){t.burn(e,a,o),t.accounts.addBalance(e,a,o);var l=t.redeem(e,n,c,0,!0);if(l.error)console.log(l.error);else{t.accounts.subBalance(e,l.name,l.value),t.accounts.subBalance(s,a,o),t.accounts.addBalance(s,l.name,l.value);var u=t.redeem(e,n,r,0,!0);u.error?console.log(u.error):(t.accounts.subBalance(e,u.name,u.value),t.reserves.get(u.name).totalReserves=t.reserves.get(u.name).totalReserves.plus(u.value),t._updateAccountsIndex())}}else console.log("payer not enough balance")}}else console.log("this token is not stable")})),Object(K["a"])(this,"getMaxMint",(function(e,a){if(-1!==t.config.stable.indexOf(a)){var o=t._checkBorrow(e,a,0),n=Object(U["a"])(o,1),s=n[0],i=t.reserves.get(a).price;return new J.a(s).div(i)}console.log("this token is not stable")})),Object(K["a"])(this,"tradePool",(function(e,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(U["a"])(a,2),s=n[0],i=n[1],c=new J.a(i).div(100).times(t.fees.tradeFee),r=new J.a(i).minus(c),l=s.split("/")[0],u=s.split("/")[1],d=t._getOutAmount(r,l,u,s);if(i<=0)return console.log("Attempt to trade zero or negative value"),{value:0,name:u};var v={value:d,name:u};if(!o){if(t.reserves.get(u).value.lt(d))return console.log("Insufficient liquidity in the pool"),{value:0,name:u};if(!0!==t.accounts.subBalance(e,l,i))return console.log("Insifficient balance for trade"),{value:0,name:u};t.reserves.get(u).value=t.reserves.get(u).value.minus(d);var p=t._stabShare(c);t.reserves.get(l).value=t.reserves.get(l).value.plus(new J.a(i).sub(p)),t._addToStabFund(l,p),t.accounts.addBalance(e,v.name,v.value),t._countWeights(),t._balanceWeights(l,u),t.history.push([a,v])}return v})),Object(K["a"])(this,"sendWithConvert",(function(e,a,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(U["a"])(o,2),i=s[0],c=s[1],r=new J.a(c).div(100).times(t.fees.tradeFee),l=new J.a(c).minus(r),u=i.split("/")[0],d=i.split("/")[1],v=t._getOutAmount(l,u,d,i);if(c<=0)return console.log("Attempt to trade zero or negative value"),{value:0,name:d};var p={value:v,name:d};if(!n){if(t.reserves.get(d).value.lt(v))return console.log("Insufficient liquidity in the pool"),{value:0,name:d};if(!0!==t.accounts.subBalance(e,u,c))return console.log("Insifficient balance for trade"),{value:0,name:d};t.reserves.get(d).value=t.reserves.get(d).value.minus(v);var f=t._stabShare(r);new J.a(r).sub(f);t.reserves.get(u).staked=t.reserves.get(u).staked.minus(r),t.reserves.get(d).staked=t.reserves.get(d).staked.plus(r),t.reserves.get(u).value=t.reserves.get(u).value.plus(new J.a(c).sub(f)),t._addToStabFund(u,f),t.accounts.addBalance(a,p.name,p.value),t._countWeights(),t._balanceWeights(u,d),t.history.push([o,p])}return p})),Object(K["a"])(this,"repay",(function(e,a,o){t._updateIndexes(a);var n=t.reserves.get(a),s=t.accounts.countBorrow(e,a,n.borrowIndex),i=o,c=s.minus(i),r=n.totalBorrows.minus(i);t.accounts.setBorrow(e,a,c,n.borrowIndex),t.accounts.subBalance(e,a,i),n.value=n.value.plus(i),n.totalBorrows=r})),Object(K["a"])(this,"liquidate",(function(e,a,o,n,s){t._updateIndexesAll();var i=t._liquidateBorrowAllowed(e,a);if(i.lessThan(0)||i.equals(0))console.log("liquidation not allowed");else{var c=t._liquidateCalculateSeizeTokens(a,n,o);if(t.accounts.getDeposit(e,n).share.lt(c))console.log("borrower not enough collateral");else if(t.accounts.get(s).balance[a]&&!t.accounts.get(s).balance[a].lt(o)){t.repay(e,a,o),t.accounts.addBalance(e,a,o);var r=t.redeem(e,n,c,0,!0);r.error?console.log(r.error):(t.accounts.subBalance(e,r.name,r.value),t.accounts.subBalance(s,a,o),t.accounts.addBalance(s,r.name,r.value),t._updateAccountsIndex())}else console.log("payer not enough balance")}})),Object(K["a"])(this,"getMaxBorrow",(function(e,a){var o=t._checkBorrow(e,a,0,0),n=Object(U["a"])(o,1),s=n[0],i=t.reserves.get(a).price;return new J.a(s).div(i)})),Object(K["a"])(this,"_liquidateCalculateSeizeTokens",(function(e,a,o){var n=t.reserves.get(e).price,s=t.reserves.get(a).price,i=t._getExchangeRate(a),c=new J.a(t.config.liquidationIncentive).times(n),r=new J.a(s).times(i),l=c.div(r);return l.times(o).abs()})),Object(K["a"])(this,"_getOutAmount",(function(e,a,o){var n,s=t.reserves.getValueWithBorrows(a).times(100),i=t.reserves.get(a).weight,c=t.reserves.get(o).weight,r=t.reserves.getValueWithBorrows(o).times(100),l=s.div(s.plus(e)).pow(i.div(c)),u=new J.a(1).minus(l);return n=r.times(u),n})),Object(K["a"])(this,"_getInAmount",(function(e,a,o){var n,s=t.reserves.getValueWithBorrows(a),i=t.reserves.get(a).weight,c=t.reserves.get(o).weight,r=t.reserves.getValueWithBorrows(o),l=r.div(r.minus(e)).pow(c.div(i));return n=l.minus(1).times(s),n})),Object(K["a"])(this,"_getSpotPrice",(function(e,a){var o=t.reserves.getValueWithBorrows(e).div(t.reserves.get(e).weight),n=t.reserves.getValueWithBorrows(a).div(t.reserves.get(a).weight),s=new J.a(1).div(new J.a(1).minus(t.fees.tradeFee.div(100)));return o.div(n).mul(s)})),Object(K["a"])(this,"_stabShare",(function(e){return e.mul(t.dynamicParams.stabPercentage).div(100)})),Object(K["a"])(this,"setPrices",(function(e){var a=t._getTokens();a.forEach((function(a){if(!e[a])throw{error:"Has no price for ".concat(a," token!")};t.reserves.setPrice(a,e[a])})),t._countWeights()})),Object(K["a"])(this,"_getTokens",(function(){return t.config.tokens.concat(t.config.stable)})),Object(K["a"])(this,"_addToStabFund",(function(e,a){t.stabFund[e]&&t.stabFund[e].value?t.stabFund[e].value=t.stabFund[e].value.plus(a):t.stabFund[e]={value:new J.a(a)}})),Object(K["a"])(this,"_addAccountDeposit",(function(e,a,o){var n=t.reserves.getValueWithBorrows(a),s=t.reserves.get(a).price,i=t._countShareToken(a,o,n);return t.accounts.addDeposit(e,a,o,i,s),t.reserves.addValue(a,o),i})),Object(K["a"])(this,"_removeAccountDeposit",(function(e,a,o,n){var s=t.reserves.get(a).price;t.accounts.removeDeposit(e,a,o,n,s),t.reserves.get(a).value=t.reserves.get(a).value.minus(o),t.sTokens[a]=t.sTokens[a].minus(n)})),Object(K["a"])(this,"_liquidateShareAmount",(function(e,a){var o=new J.a(e).times(t.reserves.getValueWithBorrows(a)).div(t.sTokens[a]);return{value:o,name:a}})),Object(K["a"])(this,"_countShareToken",(function(e,a,o){var n=0;return t.sTokens[e]?(n=new J.a(a).div(o).times(t.sTokens[e]),t.sTokens[e]=t.sTokens[e].plus(n)):(n=new J.a(a).sqrt(),t.sTokens[e]=n),n})),Object(K["a"])(this,"_countWeights",(function(){var e=t._getTokens();if(e.length){t._countCapital();var a=t.reserves.getFullCapital();e.forEach((function(e){t.reserves.get(e).weight=t.reserves.get(e).capital.times(100).div(a)}))}})),Object(K["a"])(this,"_balanceWeights",(function(e,a){var o=t.reserves.get(e),n=t.reserves.get(a),s=o.weight.plus(n.weight),i=o.value.div(o.staked).ln();if(!0!==i.abs().lt(.001)){var c=o.price.div(n.price),r=o.staked.div(n.value).mul(c).mul(i),l=(void 0)(r),u=new J.a(l).div(i),d=J.a.div(u,u.plus(1)).mul(s),v=J.a.div(1,u.plus(1)).mul(s);o.weight=d,n.weight=v}})),Object(K["a"])(this,"_countCapital",(function(){var e=t._getTokens();e.forEach((function(e){t.reserves.get(e).capital=t.reserves.getValueWithBorrows(e).times(t.reserves.get(e).price)}))})),Object(K["a"])(this,"getLiqudationMax",(function(e,a){return t._liquidateBorrowAllowed(e,a)})),Object(K["a"])(this,"_liquidateBorrowAllowed",(function(e,a){var o=t._checkBorrow(e,a,0),n=Object(U["a"])(o,2),s=(n[0],n[1]);if(0===s)return new J.a(0);var i=t.accounts.countBorrow(e,a,t.reserves.get(a).borrowIndex);return new J.a(t.dynamicParams.closeFactor).times(i)})),Object(K["a"])(this,"_getExchangeRate",(function(e){var a=t.reserves.get(e);return t.sTokens[e]?a.value.plus(a.totalBorrows).div(t.sTokens[e]):new J.a(0)})),Object(K["a"])(this,"_checkBorrow",(function(e,a,o){var n=t.accounts.get(e),s=t.collateralFactor;t._updateIndexes(a);var i=t._getTokens().map((function(i){var c=n.deposits[i]?n.deposits[i].share:new J.a(0),r=t.accounts.countBorrow(e,i,t.reserves.get(i).borrowIndex),l=t.reserves.get(i).price,u=t._getExchangeRate(i),d=new J.a(s).times(u).times(l),v=c.times(d).abs(),p=i===a?r.plus(o).times(l).abs():r.times(l).abs();return[v,p]})).reduce((function(e,t){return[e[0].plus(t[0]),e[1].plus(t[1])]}),[new J.a(0),new J.a(0)]),c=Object(U["a"])(i,2),r=c[0],l=c[1];return n.sumCollateral=r,n.sumBorrowPlusEffects=l,r.gt(l)?[r.minus(l),0]:[0,l.minus(r)]})),Object(K["a"])(this,"_updateIndexesAll",(function(){t._getTokens().forEach((function(e){return t._updateIndexes(e)}))})),Object(K["a"])(this,"_updateAccountsIndex",(function(){Object.keys(t.accounts.all()).forEach((function(e){t._getTokens().forEach((function(a){t._checkBorrow(e,a,0)}))}))})),Object(K["a"])(this,"_updateIndexes",(function(e){var a=t.reserves.get(e),o=new J.a(t.day),n=a.prevDay;if(o===n)return 0;var s=a.value,i=a.totalBorrows,c=a.totalReserves;a.utilizationRate=t._utilizationRate(s,i,c);var r=a.borrowIndex,l=t._getBorrowRate(s,i,c);a.borrowRate=l.times(ee),a.supplyRate=t._getSupplyRate(s,i,c).times(ee);var u=o.minus(n),d=l.times(u),v=d.times(i),p=v.plus(i),f=t.reserveFactor.times(v).plus(c),m=d.times(r).plus(r);a.prevDay=o,a.borrowIndex=m,a.totalBorrows=p,a.totalReserves=f})),Object(K["a"])(this,"_utilizationRate",(function(e,t,a){return!t||t.eq(0)?new J.a(0):t.div(e.plus(t).minus(a))})),Object(K["a"])(this,"_getBorrowRate",(function(e,a,o){var n=t._utilizationRate(e,a,o);return n.times(t.dayMultiplier).plus(t.dayRate)})),Object(K["a"])(this,"_getSupplyRate",(function(e,a,o){var n=new J.a(1).minus(t.config.reserveFactor),s=t._getBorrowRate(e,a,o),i=s.times(n);return t._utilizationRate(e,a,o).times(i)})),Object(K["a"])(this,"_setParameters",(function(e){Object.assign(t.dynamicParams,e)})),Object(K["a"])(this,"_getPrices",(function(){var e,a=t._getTokens().filter((function(e){return-1===e.indexOf("s")})),o=(a.reduce((function(e,a,o){return Object(p["a"])(Object(p["a"])({},e),{},Object(K["a"])({},a,t.reserves.get(a).price))}),{}),{}),n=Object(L["a"])(a);try{for(n.s();!(e=n.n()).done;){var s=e.value;o[s]||(o[s]={});var i,c=Object(L["a"])(a);try{for(c.s();!(i=c.n()).done;){var r=i.value;s!==r&&(o[s][r]=t.tradePool(1,[r+"/"+s,1],1).value.div(1).toFixed(4))}}catch(l){c.e(l)}finally{c.f()}}}catch(l){n.e(l)}finally{n.f()}return o}))},ae=te,oe=(a("a630"),a("3ca3"),function e(){var t=this;Object(N["a"])(this,e),Object(K["a"])(this,"init",(function(e){t.tokens=Array.from(e.tokens),t.prices=Object.assign({},e.prices)})),Object(K["a"])(this,"getNewPrices",(function(){return t.tokens.forEach((function(e){t.prices[e]=new J.a(t.prices[e]).mul(t.rand_normal().plus(1))})),t.prices})),Object(K["a"])(this,"rand_normal",(function(){for(var e=new J.a(0),t=6,a=0;a<t;a+=1)e=e.plus(Math.random()).minus(.5);return e.div(t).div(4)}))}),ne=oe,se=a("289d"),ie=(a("5abe"),a("4a7a")),ce=a.n(ie);window.pool=new ae,window.oracle=new ne,o["a"].use(se["a"]),o["a"].component("v-select",ce.a),o["a"].config.productionTip=!1,new o["a"]({router:W,store:V,render:function(e){return e(l)}}).$mount("#app")},caba:function(e,t,a){},db62:function(e,t,a){}});
//# sourceMappingURL=app.78a5a1c0.js.map