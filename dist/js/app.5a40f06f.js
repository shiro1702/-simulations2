(function(t){function e(e){for(var o,i,c=e[0],r=e[1],l=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,c=1;c<a.length;c++){var r=a[c];0!==n[r]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/-simulations2/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("db62")},2278:function(t,e,a){},3654:function(t,e,a){"use strict";a("caba")},"44dc":function(t,e,a){"use strict";a("2278")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("router-view")],1)},s=[],i=(a("034f"),a("2877")),c={},r=Object(i["a"])(c,n,s,!1,null,null,null),l=r.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home py-6"},[a("div",{staticClass:"columns fullHeight"},[a("div",{staticClass:"column"},[a("cmp-form",{attrs:{form:t.form1,title:"Пул"}}),a("b-field",{attrs:{label:"prices:",grouped:"","group-multiline":""}},[t._l(t.poolPrices,(function(e){return a("div",{key:e.name,staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-primary is-light",size:"is-medium"}},[t._v(t._s(e.name))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(e.value))])],1)],1)})),a("b-button",{attrs:{type:"is-primary",size:"is-small","icon-left":"border-color"},on:{click:function(e){t.priceModal=!0}}})],2)],1),a("div",{staticClass:"column"},[a("cmp-accounts-form",{attrs:{tokenOptions:t.config.tokens.concat([t.config.stable]),pricesFormat:t.poolPricesFormat,title:"Аккаунты"}})],1),a("div",{staticClass:"column"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Операции")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:t.tickDisble},on:{click:function(e){return t.nextTick()}}},[t._v("Сделать шаг")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.createDepositModal=!0}}},[t._v("Сделать депозит")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.returnDepositModal=!0}}},[t._v("Вернуть депозит")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.mintModal=!0}}},[t._v("Выпуск стейбл")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.tradeModal=!0}}},[t._v("Обмен")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.borrowModal=!0}}},[t._v("Взять займ")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.repayModal=!0}}},[t._v("Вернуть займ ")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.liquidateModal=!0}}},[t._v("Ликвидация займа")])],1),a("div",{staticClass:"column is-half"},[a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:""},on:{click:function(e){t.liquidateStableModal=!0}}},[t._v("Ликвидация стейбл")])],1)])])]),a("div",{staticClass:"columns fullHeight"},[a("div",{staticClass:"column is-9",staticStyle:{overflow:"scroll"}},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Результат")]),a("b-table",{attrs:{data:this.table,columns:t.columns}})],1),a("div",{staticClass:"column is-3"},[a("h2",{staticClass:"is-size-4 mb-3 "},[t._v("История")]),a("div",{ref:"history",staticClass:"history"},t._l(t.history,(function(e,o){return a("div",{key:o},[t._v(" "+t._s(o)+") "+t._s(e)+" ")])})),0)])]),a("b-modal",{attrs:{width:640},model:{value:t.tokenModal,callback:function(e){t.tokenModal=e},expression:"tokenModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"})])]),a("b-modal",{attrs:{width:440},model:{value:t.priceModal,callback:function(e){t.priceModal=e},expression:"priceModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("cmp-form",{attrs:{form:t.prices,title:"Prices"}}),a("b-button",{staticClass:"mt-4",attrs:{expanded:"",type:"is-primary",outlined:"",disabled:JSON.stringify(t.prices)==JSON.stringify(t.poolPrices)},on:{click:function(e){t.setPricesArray(t.prices),t.priceModal=!1}}},[t._v("Изменить")])],1)])]),a("b-modal",{attrs:{width:640},model:{value:t.createDepositModal,callback:function(e){t.createDepositModal=e},expression:"createDepositModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Сделать депозит")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},model:{value:t.createDepositInfo.account,callback:function(e){t.$set(t.createDepositInfo,"account",e)},expression:"createDepositInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"number"},model:{value:t.createDepositInfo.value,callback:function(e){t.$set(t.createDepositInfo,"value",e)},expression:"createDepositInfo.value"}}),t.poolAccounts[t.createDepositInfo.account]?t._l(t.poolAccounts[t.createDepositInfo.account].balance,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":o},model:{value:t.createDepositInfo.token,callback:function(e){t.$set(t.createDepositInfo,"token",e)},expression:"createDepositInfo.token"}},[t._v(" "+t._s(o)+" "+t._s(e)+" ")])],1)})):t._e()],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("Внести "+t._s(t.createDepositInfo.tokenInput)),a("br"),t._v(" "+t._s(t.createDepositInfo.token)+" от аккаунта №"+t._s(t.createDepositInfo.account+1)+" в депозит")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:t.createDepositBtn},on:{click:function(e){t.createDeposit(t.createDepositInfo),t.createDepositModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:t.returnDepositModal,callback:function(e){t.returnDepositModal=e},expression:"returnDepositModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Вернуть депозит")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setReturnOptionToDeposit(parseInt(o))}},model:{value:t.returnDepositInfo.account,callback:function(e){t.$set(t.returnDepositInfo,"account",e)},expression:"returnDepositInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"number"},model:{value:t.returnDepositInfo.value,callback:function(e){t.$set(t.returnDepositInfo,"value",e)},expression:"returnDepositInfo.value"}}),t._l(t.returnDepositInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":e.name},model:{value:t.returnDepositInfo.token,callback:function(e){t.$set(t.returnDepositInfo,"token",e)},expression:"returnDepositInfo.token"}},[t._v(" "+t._s(e.name)+" "+t._s(e.value)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("Вывести "+t._s(t.returnDepositInfo.tokenInput)),a("br"),t._v(" "+t._s(t.returnDepositInfo.token)+" от аккаунта №"+t._s(t.returnDepositInfo.account+1)+" на личный баланс")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:0==t.poolAccounts.length||"0"==t.returnDepositInfo.value||""==t.returnDepositInfo.value},on:{click:function(e){t.returnDeposit(t.returnDepositInfo),t.returnDepositModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:t.borrowModal,callback:function(e){t.borrowModal=e},expression:"borrowModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Взять займ")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setReturnOptionToBorrow(parseInt(o),t.borrowInfo.token)}},model:{value:t.borrowInfo.account,callback:function(e){t.$set(t.borrowInfo,"account",e)},expression:"borrowInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("you get (max - "+t._s(t.borrowInfo.maxBorrow)+")")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"number"},model:{value:t.borrowInfo.value,callback:function(e){t.$set(t.borrowInfo,"value",e)},expression:"borrowInfo.value"}}),t._l(t.borrowInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":e},nativeOn:{click:function(a){return t.setReturnOptionToBorrow(t.borrowInfo.account,e)}},model:{value:t.borrowInfo.token,callback:function(e){t.$set(t.borrowInfo,"token",e)},expression:"borrowInfo.token"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("Обеспеченность займа: 200% ")]),a("h2",{staticClass:"is-size-6 mb-3"},[t._v("Занять "),a("br"),t._v(" "+t._s(t.borrowInfo.payValue)+" "+t._s(t.borrowInfo.token)+" "),a("br"),t._v(" аккаунту №"+t._s(t.borrowInfo.account+1))]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:t.borrowBtn},on:{click:function(e){t.borrow(t.borrowInfo),t.borrowModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:t.mintModal,callback:function(e){t.mintModal=e},expression:"mintModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Выпуск стейблкоинов")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setMaxToMint(parseInt(o),t.mintInfo.token)}},model:{value:t.mintInfo.account,callback:function(e){t.$set(t.mintInfo,"account",e)},expression:"mintInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("you get (max - "+t._s(t.mintInfo.maxMint)+")")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"number"},model:{value:t.mintInfo.value,callback:function(e){t.$set(t.mintInfo,"value",e)},expression:"mintInfo.value"}}),t._l(t.mintInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":e},nativeOn:{click:function(a){return t.setMaxToMint(t.mintInfo.account,e)}},model:{value:t.mintInfo.token,callback:function(e){t.$set(t.mintInfo,"token",e)},expression:"mintInfo.token"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v(" Выпустить для аккаунта №"+t._s(t.mintInfo.account+1)+" "+t._s(t.mintInfo.token)+" "+t._s(t.mintInfo.value)+" ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:0==t.poolAccounts.length||""==t.mintInfo.value||0==parseFloat(t.mintInfo.value)||parseFloat(t.mintInfo.maxMint)<parseFloat(t.mintInfo.value)},on:{click:function(e){t.mint(t.mintInfo),t.mintModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:t.tradeModal,callback:function(e){t.tradeModal=e},expression:"tradeModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Обмен")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-3"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){return t.setTradeResult(o,t.tradeInfo.token,t.tradeInfo.token2,t.tradeInfo.value)}},model:{value:t.tradeInfo.account,callback:function(e){t.$set(t.tradeInfo,"account",e)},expression:"tradeInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-6"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("you pay")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"number"},on:{input:function(e){return t.setTradeResult(t.tradeInfo.account,t.tradeInfo.token,t.tradeInfo.token2,e)}},model:{value:t.tradeInfo.value,callback:function(e){t.$set(t.tradeInfo,"value",e)},expression:"tradeInfo.value"}}),t.poolAccounts[t.tradeInfo.account]?t._l(t.poolAccounts[t.tradeInfo.account].balance,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token1","native-value":o},nativeOn:{click:function(e){return t.setTradeResult(t.tradeInfo.account,o,t.tradeInfo.token2,t.tradeInfo.value)}},model:{value:t.tradeInfo.token,callback:function(e){t.$set(t.tradeInfo,"token",e)},expression:"tradeInfo.token"}},[t._v(" "+t._s(o)+" "+t._s(e)+" ")])],1)})):t._e()],2),a("div",{staticClass:"column is-6"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("you get")]),a("h2",{staticClass:"is-size-6 mb-3",style:{width:"100%",height:"40px"}},[t._v(t._s(t.tradeInfo.value2))]),t._l(t.tradeInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token2","native-value":e},nativeOn:{click:function(e){return t.setTradeResult(t.tradeInfo.account,t.tradeInfo.token,o,t.tradeInfo.value)}},model:{value:t.tradeInfo.token2,callback:function(e){t.$set(t.tradeInfo,"token2",e)},expression:"tradeInfo.token2"}},[t._v(" "+t._s(e)+" ")])],1)}))],2)])]),a("div",{staticClass:"column is-3"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v(" Обменять для аккаунта №"+t._s(t.tradeInfo.account+1)+" "+t._s(t.tradeInfo.token)+" "+t._s(t.tradeInfo.value)+" на "+t._s(t.tradeInfo.token2)+" "+t._s(t.tradeInfo.value2)+" ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:t.createTradeBtn},on:{click:function(e){t.trade(t.tradeInfo),t.tradeModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:640},model:{value:t.repayModal,callback:function(e){t.repayModal=e},expression:"repayModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Вернуть займ")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setRepayAccountInfo(parseInt(o))}},model:{value:t.repayInfo.account,callback:function(e){t.$set(t.repayInfo,"account",e)},expression:"repayInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"text"},model:{value:t.repayInfo.value,callback:function(e){t.$set(t.repayInfo,"value",e)},expression:"repayInfo.value"}}),t._l(t.repayInfo.borrows,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":e.name},model:{value:t.repayInfo.token,callback:function(e){t.$set(t.repayInfo,"token",e)},expression:"repayInfo.token"}},[t._v(" "+t._s(e.name)+" - "+t._s(e.value)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h2",{staticClass:"is-size-6 mb-1"},[t._v("loan: 1200 ETH for 12 BTC")]),a("h2",{staticClass:"is-size-6 mb-1"},[t._v("срок: 12 мес")]),a("h2",{staticClass:"is-size-6 mb-1"},[t._v("к возврату: "+t._s(t.repayInfo.sumBorrowPlusEffects)+" ETH")]),a("h2",{staticClass:"is-size-6 mb-1"},[t._v("обеспечение: "+t._s(t.repayInfo.sumCollateral)+" BTC")]),a("h3",{staticClass:"is-size-8 mb-3"},[t._v(" Вернуть займ аккаунта №"+t._s(t.repayInfo.account+1)+" в размере 1300 ЕTH и вернуть 13 BTC "+t._s(t.repayInfo.payValue)+" "+t._s(t.repayInfo.token)+" "),a("br")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:0==t.poolAccounts.length||0==t.repayInfo.borrows.length||""==t.repayInfo.token||""==t.repayInfo.value||0==parseFloat(t.repayInfo.value)},on:{click:function(e){t.repay(t.repayInfo),t.repayModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:740},model:{value:t.liquidateModal,callback:function(e){t.liquidateModal=e},expression:"liquidateModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Ликвидация займа")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setMaxLiquidate(parseInt(o),t.liquidateInfo.token),t.setLiqidateOptions1(parseInt(o),parseInt(t.liquidateInfo.account2)),t.setLiqidateOptions(parseInt(o))}},model:{value:t.liquidateInfo.account,callback:function(e){t.$set(t.liquidateInfo,"account",e)},expression:"liquidateInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token max("+t._s(t.liquidateInfo.maxLiquidate)+")")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"text"},model:{value:t.liquidateInfo.value,callback:function(e){t.$set(t.liquidateInfo,"value",e)},expression:"liquidateInfo.value"}}),t._l(t.liquidateInfo.options1,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":e},nativeOn:{click:function(a){return t.setMaxLiquidate(t.liquidateInfo.account,e)}},model:{value:t.liquidateInfo.token,callback:function(e){t.$set(t.liquidateInfo,"token",e)},expression:"liquidateInfo.token"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account2")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account2","native-value":parseInt(o)},nativeOn:{click:function(e){t.setLiqidateOptions1(parseInt(t.liquidateInfo.account),parseInt(o)),t.setLiqidateOptions(parseInt(t.liquidateInfo.account),parseInt(o))}},model:{value:t.liquidateInfo.account2,callback:function(e){t.$set(t.liquidateInfo,"account2",e)},expression:"liquidateInfo.account2"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token2")]),t._l(t.liquidateInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token2","native-value":e},model:{value:t.liquidateInfo.token2,callback:function(e){t.$set(t.liquidateInfo,"token2",e)},expression:"liquidateInfo.token2"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h3",{staticClass:"is-size-8 mb-3"},[t._v(" Ликвидировать займ аккаунта №"+t._s(t.liquidateInfo.account+1)+" и перевести "+t._s(t.liquidateInfo.token)+" в пул ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:0==t.poolAccounts.length||""==t.liquidateInfo.token||""==t.liquidateInfo.token2||0==t.liquidateInfo.options1.length||0==t.liquidateInfo.options||""==t.liquidateInfo.value||0==parseFloat(t.liquidateInfo.value)},on:{click:function(e){t.liquidate(t.liquidateInfo),t.liquidateModal=!1}}},[t._v("Подтвердить")])],1)])])])]),a("b-modal",{attrs:{width:740},model:{value:t.liquidateStableModal,callback:function(e){t.liquidateStableModal=e},expression:"liquidateStableModal"}},[a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v("Ликвидация стейбл коинов")]),a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account","native-value":parseInt(o)},nativeOn:{click:function(e){t.setLiqidateStableOptions1(parseInt(o)),t.setLiqidateStableOptions(parseInt(o),parseInt(t.liquidateStableInfo.account2))}},model:{value:t.liquidateStableInfo.account,callback:function(e){t.$set(t.liquidateStableInfo,"account",e)},expression:"liquidateStableInfo.account"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token max("+t._s(t.liquidateStableInfo.maxLiquidate)+")")]),a("b-input",{staticClass:"is-flex-grow-2 mb-3",attrs:{type:"text"},model:{value:t.liquidateStableInfo.value,callback:function(e){t.$set(t.liquidateStableInfo,"value",e)},expression:"liquidateStableInfo.value"}}),t._l(t.liquidateStableInfo.options1,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token","native-value":e},model:{value:t.liquidateStableInfo.token,callback:function(e){t.$set(t.liquidateStableInfo,"token",e)},expression:"liquidateStableInfo.token"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("account2")]),t._l(t.poolAccounts,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"account2","native-value":parseInt(o)},nativeOn:{click:function(e){t.setLiqidateStableOptions(parseInt(t.liquidateStableInfo.account),parseInt(o))}},model:{value:t.liquidateStableInfo.account2,callback:function(e){t.$set(t.liquidateStableInfo,"account2",e)},expression:"liquidateStableInfo.account2"}},[t._v(" №"+t._s(parseInt(o)+1)+" ")])],1)}))],2),a("div",{staticClass:"column is-2"},[a("h2",{staticClass:"is-size-6 mb-3"},[t._v("token2")]),t._l(t.liquidateStableInfo.options,(function(e,o){return a("div",{key:o},[a("b-radio",{attrs:{name:"token2","native-value":e},model:{value:t.liquidateStableInfo.token2,callback:function(e){t.$set(t.liquidateStableInfo,"token2",e)},expression:"liquidateStableInfo.token2"}},[t._v(" "+t._s(e)+" ")])],1)}))],2),a("div",{staticClass:"column is-4"},[a("h3",{staticClass:"is-size-8 mb-3"},[t._v(" Ликвидировать стейбл коины аккаунта №"+t._s(t.liquidateStableInfo.account+1)+" и перевести "+t._s(t.liquidateStableInfo.token)+" в пул ")]),a("b-button",{attrs:{expanded:"",type:"is-primary",outlined:"",disabled:0==t.poolAccounts.length||""==t.liquidateStableInfo.token||""==t.liquidateStableInfo.token2||0==t.liquidateStableInfo.options1.length||0==t.liquidateStableInfo.options||""==t.liquidateStableInfo.value||0==parseFloat(t.liquidateStableInfo.value)},on:{click:function(e){t.liquidateS(t.liquidateStableInfo),t.liquidateModal=!1}}},[t._v("Подтвердить")])],1)])])])])],1)},p=[],v=(a("99af"),a("4de4"),a("4160"),a("caad"),a("b0c0"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("159b"),a("5530")),f=a("2f62"),b={tokens:["BTC","ETH","USDT","EOS"],stable:["sUSD"],tradeFee:1,baseMultiplier:2,baseRate:5,reserveFactor:.1,collateralFactor:.5,closeFactor:.5,liquidationIncentive:.97,penaltyCoefficient:.1,prices:{BTC:10500,ETH:350,USDT:1,EOS:2,sUSD:1}},m=b,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h2",{staticClass:"is-size-4 mb-3"},[t._v(t._s(t.title))]),t._l(t.form,(function(e){return a("b-field",{key:e.name,attrs:{label:e.name+":",horizontal:""}},[a("div",{staticClass:"is-flex is-align-items-center"},[e.options?a("v-select",{staticClass:"is-flex-grow-2",attrs:{multiple:"",options:e.options},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):e.exstraOption?a("div"):a("b-input",{staticClass:"is-flex-grow-2",model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),e.tooltip?a("b-tooltip",{staticClass:"control ml-2",attrs:{label:e.tooltip,multilined:""}},[a("b-icon",{attrs:{icon:"help-circle-outline"}})],1):t._e()],1)])}))],2)},g=[],w={props:["title","form"]},k=w,I=Object(i["a"])(k,h,g,!1,null,null,null),_=I.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"is-size-4 mb-3"},[t._v(t._s(t.title))]),a("div",{staticClass:"accountsFrom__scroll"},t._l(t.poolAccounts,(function(e,o){return a("div",{key:"poolAccounts"+o,staticClass:"mb-4",attrs:{grouped:"","group-multiline":""}},[a("div",{staticClass:"mb-2"},[a("span",[t._v("№"+t._s(1+parseInt(o))+" Balance: "),a("b",[t._v(t._s(t.accountSumm[o])+" ")]),t._v("USD")]),a("b-button",{staticClass:"ml-3",attrs:{size:"is-small","icon-left":"plus"},on:{click:function(e){return t.openEditModal(o)}}})],1),a("div",{staticClass:"is-flex is-flex-wrap-wrap"},t._l(e.balance,(function(e,n){return a("div",{key:"balance"+o+n,staticClass:"control mr-3 mb-3"},[a("b-tooltip",{attrs:{label:e.toString(),position:"is-bottom"}},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-primary is-light",size:"is-medium"}},[t._v(t._s(n))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(e.toString().split(".")[0])+t._s(e.toString().split(".")[1]?"."+e.toString().split(".")[1].slice(0,4):""))])],1)],1)],1)})),0)])})),0),a("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.openEditModal(-1)}}},[t._v("add account")]),a("b-modal",{attrs:{width:440},model:{value:t.accountModal,callback:function(e){t.accountModal=e},expression:"accountModal"}},[t.accountModal?a("div",{staticClass:"modal-card modal-content-height",staticStyle:{width:"auto"}},[a("section",{staticClass:"modal-card-body"},[a("cmp-account-form",{attrs:{title:"test",i:t.currentAccountindex,pricesFormat:t.pricesFormat}})],1)]):t._e()])],1)},O=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.i<0?a("h2",{staticClass:"is-size-4 mb-3"},[t._v("new account")]):a("h2",{staticClass:"is-size-4 mb-3"},[t._v(" account "+t._s(t.i+1))]),t._l(t.currentAccount,(function(e){return a("div",{key:e.name,staticClass:"is-flex is-align-items-center mb-4"},[a("b-checkbox",{staticClass:"is-flex-grow-0",model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}},[t._v(" "+t._s(e.name+":")+" ")]),a("b-input",{staticClass:"is-flex-grow-2",model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),e.tooltip?a("b-tooltip",{staticClass:"control ml-2",attrs:{label:e.tooltip,multilined:""}},[a("b-icon",{attrs:{icon:"help-circle-outline"}})],1):t._e()],1)})),t.i<0?a("b-button",{attrs:{type:"is-primary"},on:{click:function(e){t.addBalanceToAccount({data:t.currentAccountFormat,pricesFormat:t.pricesFormat}),t.$parent.close()}}},[t._v(" Create account ")]):[a("b-button",{attrs:{type:"is-primary"},on:{click:function(e){t.addBalanceToAccount({data:t.currentAccountFormat,pricesFormat:t.pricesFormat,i:t.i}),t.$parent.close()}}},[t._v(" Add coins ")])]],2)},x=[],q=(a("d81d"),{props:["title","i","pricesFormat"],data:function(){return{currentAccount:[{name:"",value:0,checked:!1}],defaultAccount:[{name:"BTC",value:100,checked:!1},{name:"ETH",value:100,checked:!1},{name:"USDT",value:100,checked:!1},{name:"EOS",value:100,checked:!1},{name:"sUSD",value:100,checked:!1}]}},computed:Object(v["a"])(Object(v["a"])({},Object(f["e"])("accounts",{accounts:"items",poolAccounts:"poolAccounts"})),{},{currentAccountFormat:function(){var t={};return this.currentAccount.forEach((function(e){e.checked&&(t[e.name]=e.value)})),t}}),methods:Object(v["a"])(Object(v["a"])({},Object(f["b"])("accounts",["saveItem","deleteItem","addBalanceToAccount"])),{},{unformat:function(t){var e=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.push({name:a,value:t[a].toString(),checked:!0});return e}}),created:function(){this.currentAccount=this.defaultAccount.map((function(t){return t}))}}),j=q,S=Object(i["a"])(j,C,x,!1,null,null,null),B=S.exports,M={props:{title:{default:""},tokenOptions:{default:[]},pricesFormat:{default:{}}},components:{"cmp-account-form":B},data:function(){return{accountModal:!1,currentAccount:{},currentAccountindex:-1}},computed:Object(v["a"])(Object(v["a"])({},Object(f["e"])("accounts",["poolAccounts"])),Object(f["c"])("accounts",{accountsChecked:"itemsChecked",accountSumm:"accountSumm"})),methods:{openEditModal:function(t){this.accountModal=!0,this.currentAccountindex=t}}},A=M,D=(a("44dc"),Object(i["a"])(A,y,O,!1,null,null,null)),T=D.exports;console.log();var F={name:"Home",components:{"cmp-form":_,"cmp-accounts-form":T},data:function(){return{capital:0,tickDisble:!0,tokenModal:!1,priceModal:!1,createDepositModal:!1,createDepositInfo:{account:0,value:0,token:""},returnDepositModal:!1,returnDepositInfo:{account:0,value:0,token:"",options:[]},borrowModal:!1,borrowInfo:{account:0,value:0,token:"",options:m.tokens,maxBorrow:0},mintModal:!1,mintInfo:{account:0,value:0,token:"",options:m.stable,maxMint:0},tradeModal:!1,tradeInfo:{account:0,value:0,value2:0,token:"",token2:"",options:m.tokens,maxMint:0},repayModal:!1,repayInfo:{account:0,value:0,getValue:0,borrows:[],token:"",depositsToken:"",sumCollateral:0,sumBorrowPlusEffects:0},liquidateModal:!1,liquidateInfo:{account:0,account2:0,value:0,maxLiquidate:0,options1:[],options:[],borrows:0,token:"",token2:""},liquidateStableModal:!1,liquidateStableInfo:{account:0,account2:0,value:0,maxLiquidate:0,options1:[],options:[],borrows:0,token:"",token2:""},form1:[{name:"tokens",value:m.tokens,options:m.tokens,tooltip:"Изменить список токенов в пуле"},{name:"stable",value:m.stable,options:m.stable,tooltip:"Изменить список стейбл коинов в пуле"},{name:"tradeFee",value:m.tradeFee},{name:"baseRate",value:m.baseRate},{name:"reserveFactor",value:m.reserveFactor},{name:"collateralFactor",value:m.collateralFactor},{name:"closeFactor",value:m.closeFactor},{name:"liquidationIncentive",value:m.liquidationIncentive},{name:"penaltyCoefficient",value:m.penaltyCoefficient}],table:[],credit:[{name:"tokens loan",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет, которые \n            принимаются в качестве \n            депозита под обеспечение \n            займа"},{name:"tokens dep",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет которые\n            принимаются в качестве \n            депозита под обеспечение \n            займа"},{name:"minimum ratio:",value:""},{name:"liquidation penalty",value:""},{name:"stability fee",value:""},{name:"кол-во займов",value:""},{name:"процент возврата",value:""}],bargaining:[{name:"tokens",value:[],options:["BTC","ETH","USDT","EOS","NEO","MKR","XRP"],tooltip:"Просмотреть и изменить\n            список монет которые\n            могут участвовать в \n            торгах"},{name:"fee",value:""},{name:"baseRate",value:""},{name:"кол-во торгов",value:""}],prices:[],history:[]}},computed:Object(v["a"])(Object(v["a"])(Object(v["a"])(Object(v["a"])(Object(v["a"])({},Object(f["e"])("accounts",{accounts:"items",poolAccounts:"poolAccounts"})),Object(f["c"])("accounts",{accountsChecked:"itemsChecked"})),Object(f["e"])("prices",["poolPrices"])),Object(f["c"])("prices",["poolPricesFormat"])),{},{columns:function(){return[{field:"name",label:"name"},{field:"value",label:"value"},{field:"totalBorrows",label:"totalBorrows"},{field:"borrowIndex",label:"borrowIndex"},{field:"totalReserves",label:"totalReserves"},{field:"price",label:"price"},{field:"capital",label:"capital"+" ".concat(this.capital)},{field:"weight",label:"weight"},{field:"staked",label:"staked"},{field:"prevDay",label:"prevDay"}]},config:function(){var t={};return this.form1.forEach((function(e){t[e.name]=e.value})),t},createDepositBtn:function(){return!(""!=this.createDepositInfo.token&&parseFloat(this.createDepositInfo.value)>0&&this.poolAccounts[this.createDepositInfo.account]&&this.poolAccounts[this.createDepositInfo.account].balance&&this.poolAccounts[this.createDepositInfo.account].balance[this.createDepositInfo.token]&&parseFloat(this.createDepositInfo.value)<=parseFloat(this.poolAccounts[this.createDepositInfo.account].balance[this.createDepositInfo.token].toString()))},createTradeBtn:function(){return!(""!=this.tradeInfo.token&&parseFloat(this.tradeInfo.value)>0&&this.poolAccounts[this.tradeInfo.account]&&this.poolAccounts[this.tradeInfo.account].balance&&this.poolAccounts[this.tradeInfo.account].balance[this.tradeInfo.token]&&parseFloat(this.tradeInfo.value)<=parseFloat(this.poolAccounts[this.tradeInfo.account].balance[this.tradeInfo.token].toString()))},borrowBtn:function(){return!(""!=this.borrowInfo.token&&parseFloat(this.borrowInfo.value)>0&&parseFloat(this.borrowInfo.value)<=parseFloat(this.borrowInfo.maxBorrow.toString()))}}),watch:{config:function(t){window.pool.createPool(t),window.oracle.init(t)},priceModal:function(t){var e=this;t&&(this.prices=[],this.poolPrices.forEach((function(t){e.prices.push(Object.assign({},t))})))},history:function(){this.$refs.history.scrollTo({top:this.$refs.history.scrollHeight,behavior:"smooth"})},returnDepositModal:function(t){t&&this.setReturnOptionToDeposit(this.returnDepositInfo.account)},borrowModal:function(t){t&&this.setReturnOptionToBorrow(this.borrowInfo.account,this.borrowInfo.token)},mintModal:function(t){t&&this.setMaxToMint(parseInt(this.mintInfo.account),this.mintInfo.token)},repayModal:function(t){t&&this.setRepayAccountInfo(this.repayInfo.account)},liquidateModal:function(t){t&&(this.setMaxLiquidate(this.liquidateInfo.account,this.liquidateInfo.token),this.setLiqidateOptions1(this.liquidateInfo.account,this.liquidateInfo.account2),this.setLiqidateOptions(this.liquidateInfo.account))},liquidateStableModal:function(t){t&&(this.setLiqidateStableOptions1(this.liquidateStableInfo.account),this.setLiqidateStableOptions(this.liquidateStableInfo.account,this.liquidateStableInfo.account2))}},methods:Object(v["a"])(Object(v["a"])(Object(v["a"])(Object(v["a"])({},Object(f["b"])("accounts",["updateAccounts"])),Object(f["d"])("prices",["setPrices"])),Object(f["b"])("prices",["setPricesArray"])),{},{Create:function(){window.oracle.init(m),window.pool.createPool(m),this.setPrices(m.prices)},updateResults:function(){var t=window.pool.getInfo(this.poolPricesFormat);console.log("getInfo",t),this.capital=t.capital.toString(),this.table=[];var e=t.reserves;this.updateAccounts(this.poolPricesFormat);var a=window.pool._getTokens().filter((function(t){return!window.pool.reserves.getValue(t).equals(0)}));for(var o in a&&a.length>0&&(this.tickDisble=!1),e)if(Object.prototype.hasOwnProperty.call(e,o)){var n={};for(var s in n.name=o,e[o])Object.prototype.hasOwnProperty.call(e,o)&&(n[s]=e[o][s].toString());this.table.push(n)}console.log(this.table)},nextTick:function(){window.pool.tick(1),this.updateResults(),this.history.push("pool tick")},createDeposit:function(t){window.pool.deposit(t.account,{name:t.token,value:parseFloat(t.value)}),this.updateResults(),this.history.push("создан депозит для аккаунта №".concat(t.account+1," на сумму ").concat(t.token," ").concat(t.value))},setReturnOptionToDeposit:function(t){console.log("accounts",window.pool.accounts.get(t));var e=window.pool.accounts.get(t).balance,a=[];for(var o in e)a.push({name:o,value:e[o].toString()});this.$set(this.returnDepositInfo,"options",a)},returnDeposit:function(t){console.log("account",t.account),console.log("token",t.token),console.log("value",t.value);var e=window.pool.redeem(t.account,t.token,parseFloat(t.value));this.updateResults(),e.error?(this.$buefy.toast.open({message:"Ошибка вывода средств! ".concat(e.error.message),type:"is-danger"}),this.history.push("ошибка возврата депозита для аккаунта №".concat(t.account+1," на сумму ").concat(t.token," ").concat(t.value))):(console.log("test",e),this.history.push("возврат депозита для аккаунта №".concat(t.account+1," на сумму ").concat(t.token," ").concat(t.value)))},setReturnOptionToBorrow:function(t,e){console.log("getMaxBorrow",window.pool.getMaxBorrow(t,e).toString()),this.borrowInfo.maxBorrow=window.pool.getMaxBorrow(t,e).toString()},borrow:function(t){var e=window.pool.borrow(t.account,{name:t.token,borrowAmount:parseFloat(t.value)});this.updateResults(),e?this.history.push("аккаунт №".concat(t.account+1," взял займ на сумму ").concat(t.token," ").concat(t.value)):(this.$buefy.toast.open({message:"Ошибка! Не достаточно средств в Пуле",type:"is-danger"}),this.history.push("не удачная попытка аккаунта №".concat(t.account+1," взять займ на сумму ").concat(t.token," ").concat(t.value)))},repay:function(t){var e=window.pool.burn(t.account,t.token,parseFloat(t.value));this.updateResults(),e?this.history.push("аккаунт №".concat(t.account+1," вернул займ на сумму ").concat(t.token," ").concat(t.value)):(this.$buefy.toast.open({message:"Ошибка! Возврат займа не прошёл!",type:"is-danger"}),this.history.push("Не удачная попытка вернуть займ аккаунта №".concat(t.account+1," на сумму ").concat(t.token," ").concat(t.value)))},setRepayAccountInfo:function(t){var e=window.pool.getInfo(this.poolPricesFormat).accounts[t];for(var a in console.log(e.borrows),this.repayInfo.borrows=[],e.borrows)Object.prototype.hasOwnProperty.call(e.borrows,a)&&this.repayInfo.borrows.push({name:a,value:e.borrows[a].value?e.borrows[a].value.toString():""})},setMaxLiquidate:function(t,e){this.liquidateInfo.maxLiquidate=window.pool.getLiqudationMax(t,e)},setLiqidateOptions1:function(t,e){this.liquidateInfo.options1=Object.keys(window.pool.accounts.get(t).borrows).filter((function(t){return Object.keys(window.pool.accounts.get(e).balance).includes(t)}))},setLiqidateOptions:function(t){this.liquidateInfo.options=Object.keys(window.pool.accounts.get(t).deposits)},liquidate:function(t){window.pool.liquidate(t.account,t.token,parseFloat(t.value),t.token2,t.account2),this.updateResults(),this.history.push("аккаунт №".concat(t.account2+1," ликвидировал займ ").concat(t.token2," на сумму ").concat(t.token," ").concat(t.value," аккаунту №").concat(t.account+1))},setLiqidateStableOptions1:function(t){this.liquidateStableInfo.options1=Object.keys(window.pool.accounts.get(t).balance).filter((function(t){return window.pool.config.stable.includes(t)})),this.liquidateStableInfo.token=this.liquidateStableInfo.options1[0]},setLiqidateStableOptions:function(t,e){this.liquidateStableInfo.options=Object.keys(window.pool.accounts.get(t).deposits),console.log(e),this.liquidateStableInfo.token2=this.liquidateStableInfo.options[0]},liquidateS:function(t){var e=window.pool.liquidateStable(t.account,t.token,parseFloat(t.value),t.token2,t.account2);e?this.history.push("аккаунт №".concat(t.account2+1," ликвидировал стейбл коинов ").concat(t.token2," на сумму ").concat(t.token," ").concat(t.value," аккаунту №").concat(t.account+1)):(this.$buefy.toast.open({message:"Ошибка! Стейбл коины не ликвидированы!",type:"is-danger"}),this.history.push("аккаунт №".concat(t.account2+1," НЕ ликвидировал стейбл коинов ").concat(t.token2," на сумму ").concat(t.token," ").concat(t.value," аккаунту №").concat(t.account+1))),this.updateResults()},setMaxToMint:function(t,e){console.log("setMaxToMint"),this.mintInfo.maxMint=window.pool.getMaxMint(t,e)},mint:function(t){window.pool.mint(t.account,{name:t.token,borrowAmount:parseFloat(t.value)}),this.history.push("аккаунт №".concat(t.account+1," выпустил стейбл коины на сумму ").concat(t.token," ").concat(t.value)),this.updateResults()},setTradeResult:function(t,e,a,o){console.log(t,["".concat(e,"/").concat(a),parseFloat(o)]);var n=window.pool.tradePool(t,["".concat(e,"/").concat(a),parseFloat(o)],1);console.log(n),this.tradeInfo.value2=n.value.toString()},trade:function(t){console.log(t.account,["".concat(t.token,"/").concat(t.token2),parseFloat(t.value)]);var e=window.pool.tradePool(t.account,["".concat(t.token,"/").concat(t.token2),parseFloat(t.value)]);this.updateResults(),console.log(e),this.$buefy.toast.open("вы получили ".concat(e.name," ").concat(e.value.toString())),this.history.push("аккаунт №".concat(t.account+1," обменял ").concat(t.token," / ").concat(t.token2," на сумму ").concat(t.value," (получил ").concat(e.name," ").concat(e.value.toString(),")"))}}),created:function(){this.Create()}},P=F,z=(a("3654"),Object(i["a"])(P,d,p,!1,null,null,null)),R=z.exports;o["a"].use(u["a"]);var $=[{path:"/",name:"Home",component:R}],E=new u["a"]({routes:$}),L=E,W=(a("a434"),{namespaced:!0,state:{items:[[]],poolAccounts:[]},getters:{accountSumm:function(t,e,a,o){var n=[];return t.poolAccounts.forEach((function(t){var e=0;for(var a in t.balance)Object.prototype.hasOwnProperty.call(t.balance,a)&&o["prices/poolPricesFormat"][a]&&(e+=parseFloat(t.balance[a])*o["prices/poolPricesFormat"][a]);n.push(e)})),n}},mutations:{createItem:function(t,e){t.items.push(e)},editItem:function(t,e){var a=e.i;console.log(a),t.items.splice(a,1,e.data)},deleteItem:function(t,e){t.items.splice(e,1)},setInfo:function(t,e){for(var a in t.poolAccounts=[],e)Object.prototype.hasOwnProperty.call(e,a)&&t.poolAccounts.push(e[a])}},actions:{saveItem:function(t,e){var a=t.commit;console.log(e),void 0!=e.i?(console.log("editItem",e.i),a("editItem",e)):(console.log("createItem"),a("createItem",e.data))},deleteItem:function(t,e){var a=t.commit;a("deleteItem",e)},addBalanceToAccount:function(t,e){var a=t.state,o=t.dispatch,n=e.i,s=e.data,i=e.pricesFormat;void 0!=n?window.pool.accounts.issueBalance(n,s):window.pool.accounts.issueBalance(Object.keys(a.poolAccounts).length,s),o("updateAccounts",i)},updateAccounts:function(t,e){var a=t.commit;a("setInfo",window.pool.getInfo(e).accounts)}}}),V={namespaced:!0,state:{poolPrices:[]},getters:{poolPricesFormat:function(t){var e={};return t.poolPrices.forEach((function(t){e[t.name]=t.value})),e}},mutations:{setPrices:function(t,e){for(var a in t.poolPrices=[],e)Object.prototype.hasOwnProperty.call(e,a)&&t.poolPrices.push({name:a,value:parseFloat(e[a])});window.pool.setPrices(e)}},actions:{setPricesArray:function(t,e){var a=t.commit,o={};e.forEach((function(t){o[t.name]=t.value})),a("setPrices",o)}}};o["a"].use(f["a"]);var H=new f["a"].Store({state:{},mutations:{},actions:{},modules:{accounts:W,prices:V}}),U=(a("c975"),a("13d5"),a("b680"),a("ac1f"),a("1276"),a("4c53"),a("b85c")),N=a("3835"),J=a("d4ec"),K=a("ade3"),X=a("4128"),G=a.n(X),Q=(a("4fad"),a("07ac"),function t(){var e=this;Object(J["a"])(this,t),Object(K["a"])(this,"get",(function(t){return e.accounts[t]||(e.accounts[t]={borrows:{},deposits:{},balance:{},dao:{importance:new G.a(0),dTokens:new G.a(0),delegators:[]}}),e.accounts[t]})),Object(K["a"])(this,"all",(function(){return e.accounts})),Object(K["a"])(this,"values",(function(){return Object.values(e.accounts)})),Object(K["a"])(this,"addDeposit",(function(t,a,o,n,s){if(e.get(t).deposits[a]){var i=e.get(t).deposits[a];i.value=i.value.plus(o),i.share=i.share.plus(n),i.capital=i.capital.plus(new G.a(o).times(s))}else e.get(t).deposits[a]={value:new G.a(o),share:n,capital:new G.a(o).times(s)}})),Object(K["a"])(this,"removeDeposit",(function(t,a,o,n,s){if(e.get(t).deposits[a]){var i=e.get(t).deposits[a],c=i.value.times(G.a.div(n,i.share));i.value=i.value.minus(c),i.share=i.share.minus(n),i.capital=i.capital.minus(new G.a(c).times(s))}})),Object(K["a"])(this,"getDeposit",(function(t,a){return e.get(t).deposits[a]})),Object(K["a"])(this,"setBorrow",(function(t,a,o,n){if(e.get(t).borrows[a]){var s=e.get(t).borrows[a];s.value=o,s.interestIndex=n}else e.get(t).borrows[a]={value:new G.a(o),interestIndex:new G.a(n)}})),Object(K["a"])(this,"countBorrow",(function(t,a,o){var n=e.get(t);if(!n.borrows[a]||n.borrows[a].value.eq(0))return new G.a(0);var s=n.borrows[a].value.times(o);return s.div(n.borrows[a].interestIndex)})),Object(K["a"])(this,"issueBalance",(function(t,a){Object.entries(a).forEach((function(a){var o=Object(N["a"])(a,2),n=o[0],s=o[1];e.get(t).balance[n]?e.get(t).balance[n]=e.get(t).balance[n].plus(s):e.get(t).balance[n]=new G.a(s)}))})),Object(K["a"])(this,"addBalance",(function(t,a,o){e.get(t).balance[a]?e.get(t).balance[a]=e.get(t).balance[a].plus(o):e.get(t).balance[a]=new G.a(o)})),Object(K["a"])(this,"subBalance",(function(t,a,o){var n=e.get(t).balance;return n[a]&&n[a].gte(o)?(e.get(t).balance[a]=n[a].minus(o),!0):(console.log("Not enough balance to spend ".concat(o," ").concat(a)),!1)})),Object(K["a"])(this,"forEach",(function(t){for(var a in e.accounts)e.accounts.hasOwnProperty(a)&&t(e.accounts[a],a,e.accounts)})),this.accounts={}}),Y=Q,Z=function t(e){var a=this;Object(J["a"])(this,t),Object(K["a"])(this,"get",(function(t){return a.reserves[t]||(a.reserves[t]={value:new G.a(0),totalBorrows:new G.a(0),borrowIndex:a.config.dayRate,totalReserves:new G.a(0),price:new G.a(0),capital:new G.a(0),weight:new G.a(0),staked:new G.a(0),prevDay:new G.a(a.config.day)}),a.reserves[t]})),Object(K["a"])(this,"all",(function(){return a.reserves})),Object(K["a"])(this,"addValue",(function(t,e){a.get(t).value=a.get(t).value.plus(e)})),Object(K["a"])(this,"setPrice",(function(t,e){a.get(t).price=new G.a(e)})),Object(K["a"])(this,"getValue",(function(t){return a.get(t).value})),Object(K["a"])(this,"getValueWithBorrows",(function(t){return a.get(t).value.plus(a.get(t).totalBorrows)})),Object(K["a"])(this,"getPrice",(function(t){return a.get(t).price})),Object(K["a"])(this,"getCapital",(function(t){return a.get(t).value.times(a.get(t).price)})),Object(K["a"])(this,"getLiquidCapital",(function(){return Object.keys(a.all()).map((function(t){return a.getCapital(t)})).reduce((function(t,e){return new G.a(t).plus(new G.a(e))}))})),Object(K["a"])(this,"getBorrowedCapital",(function(){return Object.keys(a.all()).map((function(t){return a.get(t).totalBorrows.times(a.get(t).price)})).reduce((function(t,e){return new G.a(t).plus(new G.a(e))}))})),Object(K["a"])(this,"getFullCapital",(function(){return a.getLiquidCapital().plus(a.getBorrowedCapital())})),this.config=e,this.reserves={}},tt=Z;function et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=t,o=a;o.gt(G.a.exp(1))&&(o=o.ln());for(var n=0;n<e;++n){var s=o.exp(),i=o.mul(s).minus(a),c=s.mul(o.add(1)),r=o.add(2).mul(o.mul(s).sub(a)).div(o.mul(2).add(2)),l=c.sub(r);o=o.sub(i.div(l))}return o}var at=365,ot=function t(){var e=this;Object(J["a"])(this,t),Object(K["a"])(this,"createPool",(function(t){e.config=t,e.sTokens={},e.history=[],e.day=1,e.fees={tradeFee:new G.a(t.tradeFee)},e.stabFund={},e.collateralFactor=new G.a(e.config.collateralFactor),e.dayRate=new G.a(e.config.baseRate).div(at),e.dayMultiplier=new G.a(e.config.baseMultiplier).div(at),e.reserveFactor=new G.a(e.config.reserveFactor).div(at),e.accounts=new Y,e.reserves=new tt({day:e.day,dayRate:e.dayRate}),e.dynamicParams={stabPercentage:new G.a(30),closeFactor:new G.a(e.config.closeFactor),penaltyCoefficient:new G.a(e.config.penaltyCoefficient)},e.tickCallbacks=[],t.prices&&e.setPrices(t.prices)})),Object(K["a"])(this,"tick",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.day+=t,e._updateIndexesAll(),e._updateAccountsIndex(),e.tickCallbacks.forEach((function(e){return e(t)}))})),Object(K["a"])(this,"addTicker",(function(t){e.tickCallbacks.push(t)})),Object(K["a"])(this,"redeem",(function(t,a,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e._updateIndexes(a);var i=e.accounts.getDeposit(t,a);if(!i||i.share.lessThan(o))return{error:{message:"deposit not found or not enough share"},currentShare:i&&i.share,specifiedShare:o};if(!1===s){var c=e._checkBorrow(t,a,0,o),r=Object(N["a"])(c,2),l=(r[0],r[1]);if(l>0)return{error:{message:"not enough collateral"}}}var u=e._liquidateShareAmount(o,a);if(u.value.lessThan(n))return{error:{message:"Return is less than specified minimum",maxReturn:u.value,minReturn:n}};var d=G.a.div(o,i.share);if(u.value.lessThan(i.value.mul(d))&&!s){var p=u.value.div(i.value),v=p.sqrt().mul(2).div(p.plus(1)).minus(1);return console.log(v),{error:{message:"Redeem with loss",output:u.value,loss:v}}}return!0!==e.accounts.subBalance(t,"x"+a,o)?{error:{message:"Not enough xTokens for redeem",token:"x"+a,need:o}}:(e._removeAccountDeposit(t,a,u.value,o),e.reserves.get(a).staked=e.reserves.get(a).staked.minus(u.value),e._countWeights(),e._updateAccountsIndex(),e.accounts.addBalance(t,u.name,u.value),u)})),Object(K["a"])(this,"redeemAll",(function(t,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.accounts.getDeposit(t,a);return!s||s.share.equals(0)?{error:{message:"deposit not found"}}:e.redeem(t,a,s.share,o,n)})),Object(K["a"])(this,"deposit",(function(t,a){var o=a.name,n=a.value;if(!0!==e.accounts.subBalance(t,o,n))return console.log("Insifficient balance for deposit"),{name:"x"+o,value:0};var s=e._addAccountDeposit(t,o,n);return e.reserves.get(o).staked=e.reserves.get(o).staked.plus(n),e._countWeights(),e._updateIndexes(o),e._updateAccountsIndex(),e.accounts.addBalance(t,"x"+o,s),{name:"x"+o,value:s}})),Object(K["a"])(this,"getInfo",(function(){return{accounts:e.accounts.all(),reserves:e.reserves.all(),sTokens:e.sTokens,capital:e.reserves.getFullCapital(),stabFund:e.stabFund,prices:e._getPrices()}})),Object(K["a"])(this,"borrow",(function(t,a){var o=a.name,n=a.borrowAmount;e._updateIndexes(o);var s=e._checkBorrow(t,o,n,0),i=Object(N["a"])(s,2),c=(i[0],i[1]),r=e.reserves.get(o);if(c>0)return console.log("not enough collateral"),!1;if(r.value.lt(n))return console.log("not enough reserve ".concat(o)),!1;var l=e.accounts.countBorrow(t,o,r.borrowIndex),u=l.plus(n);return e.accounts.setBorrow(t,o,u,r.borrowIndex),r.value=r.value.minus(n),r.totalBorrows=r.totalBorrows.plus(n),e.accounts.addBalance(t,o,n),e._countWeights(),e._updateAccountsIndex(),!0})),Object(K["a"])(this,"mint",(function(t,a){var o=a.name,n=a.borrowAmount;if(-1===e.config.stable.indexOf(o))return console.log("this token is not stable"),!1;e._updateIndexes(o);var s=e._checkBorrow(t,o,n,0),i=Object(N["a"])(s,2),c=(i[0],i[1]),r=e.reserves.get(o);if(c>0)return console.log("not enough collateral"),!1;var l=e.accounts.countBorrow(t,o,r.borrowIndex),u=l.plus(n),d=r.totalBorrows.plus(n);return e.accounts.setBorrow(t,o,u,r.borrowIndex),r.totalBorrows=d,e.accounts.addBalance(t,o,n),e._countWeights(),e._updateAccountsIndex(),!0})),Object(K["a"])(this,"burn",(function(t,a,o){if(-1===e.config.stable.indexOf(a))return console.log("this token is not stable"),!1;e._updateIndexes(a);var n=e.reserves.get(a),s=e.accounts.countBorrow(t,a,n.borrowIndex),i=o;if(s.lessThan(i))return console.log("repay amount greater then borrow"),!1;var c=s.minus(i),r=n.totalBorrows.minus(i);return e.accounts.setBorrow(t,a,c,n.borrowIndex),e.accounts.subBalance(t,a,i),n.totalBorrows=r,e._countWeights(),e._updateAccountsIndex(),!0})),Object(K["a"])(this,"liquidateStable",(function(t,a,o,n,s){if(-1===e.config.stable.indexOf(a))return console.log("this token is not stable"),!1;e._updateIndexesAll();var i=e._liquidateBorrowAllowed(t,a);if(i.lessThan(0)||i.equals(0))return console.log("liquidation not allowed"),!1;var c=e._liquidateCalculateSeizeTokens(a,n,o),r=e.dynamicParams.penaltyCoefficient.times(c),l=e.accounts.getDeposit(t,n);if(!l||l.share.lt(c.plus(r)))return console.log("borrower not enough collateral"),!1;if(!e.accounts.get(s).balance[a]||e.accounts.get(s).balance[a].lt(o))return console.log("payer not enough balance"),!1;e.burn(t,a,o),e.accounts.addBalance(t,a,o);var u=e.redeem(t,n,c,0,!0);if(u.error)return console.log(u.error),!1;e.accounts.subBalance(t,u.name,u.value),e.accounts.subBalance(s,a,o),e.accounts.addBalance(s,u.name,u.value);var d=e.redeem(t,n,r,0,!0);return d.error?(console.log(d.error),!1):(e.accounts.subBalance(t,d.name,d.value),e.reserves.get(d.name).totalReserves=e.reserves.get(d.name).totalReserves.plus(d.value),e._updateAccountsIndex(),!0)})),Object(K["a"])(this,"getMaxMint",(function(t,a){if(-1===e.config.stable.indexOf(a))return console.log("this token is not stable"),new G.a(0);var o=e._checkBorrow(t,a,0,0),n=Object(N["a"])(o,1),s=n[0],i=e.reserves.get(a).price;return new G.a(s).div(i)})),Object(K["a"])(this,"tradePool",(function(t,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(N["a"])(a,2),s=n[0],i=n[1],c=new G.a(i).div(100).times(e.fees.tradeFee),r=new G.a(i).minus(c),l=s.split("/")[0],u=s.split("/")[1],d=e._getOutAmount(r,l,u,s);if(i<=0)return console.log("Attempt to trade zero or negative value"),{value:0,name:u};var p={value:d,name:u};if(!o){if(e.reserves.get(u).value.lt(d))return console.log("Insufficient liquidity in the pool"),{value:0,name:u};if(!0!==e.accounts.subBalance(t,l,i))return console.log("Insifficient balance for trade"),{value:0,name:u};e.reserves.get(u).value=e.reserves.get(u).value.minus(d);var v=e._stabShare(c);e.reserves.get(l).value=e.reserves.get(l).value.plus(new G.a(i).sub(v)),e._addToStabFund(l,v),e.accounts.addBalance(t,p.name,p.value),e._countWeights(),e._balanceWeights(l,u),e.history.push([a,p])}return p})),Object(K["a"])(this,"sendWithConvert",(function(t,a,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(N["a"])(o,2),i=s[0],c=s[1],r=new G.a(c).div(100).times(e.fees.tradeFee),l=new G.a(c).minus(r),u=i.split("/")[0],d=i.split("/")[1],p=e._getOutAmount(l,u,d,i);if(c<=0)return console.log("Attempt to trade zero or negative value"),{value:0,name:d};var v={value:p,name:d};if(!n){if(e.reserves.get(d).value.lt(p))return console.log("Insufficient liquidity in the pool"),{value:0,name:d};if(!0!==e.accounts.subBalance(t,u,c))return console.log("Insifficient balance for trade"),{value:0,name:d};e.reserves.get(d).value=e.reserves.get(d).value.minus(p);var f=e._stabShare(r);new G.a(r).sub(f);e.reserves.get(u).staked=e.reserves.get(u).staked.minus(r),e.reserves.get(d).staked=e.reserves.get(d).staked.plus(r),e.reserves.get(u).value=e.reserves.get(u).value.plus(new G.a(c).sub(f)),e._addToStabFund(u,f),e.accounts.addBalance(a,v.name,v.value),e._countWeights(),e._balanceWeights(u,d),e.history.push([o,v])}return v})),Object(K["a"])(this,"repay",(function(t,a,o){e._updateIndexes(a);var n=e.reserves.get(a),s=e.accounts.countBorrow(t,a,n.borrowIndex),i=o;if(s.lessThan(i))return console.log("repay amount greater then borrow"),!1;var c=s.minus(i),r=n.totalBorrows.minus(i);e.accounts.setBorrow(t,a,c,n.borrowIndex),e.accounts.subBalance(t,a,i),n.value=n.value.plus(i),n.totalBorrows=r})),Object(K["a"])(this,"liquidate",(function(t,a,o,n,s){e._updateIndexesAll();var i=e._liquidateBorrowAllowed(t,a);if(i.lessThan(0)||i.equals(0))return console.log("liquidation not allowed"),!1;var c=e._liquidateCalculateSeizeTokens(a,n,o),r=e.accounts.getDeposit(t,n);if(!r||r.share.lt(c))return console.log("borrower not enough collateral"),!1;if(!e.accounts.get(s).balance[a]||e.accounts.get(s).balance[a].lt(o))return console.log("payer not enough balance"),!1;e.repay(t,a,o),e.accounts.addBalance(t,a,o);var l=e.redeem(t,n,c,0,!0);return l.error?(console.log(l.error),!1):(e.accounts.subBalance(t,l.name,l.value),e.accounts.subBalance(s,a,o),e.accounts.addBalance(s,l.name,l.value),e._updateAccountsIndex(),!0)})),Object(K["a"])(this,"getMaxBorrow",(function(t,a){var o=e._checkBorrow(t,a,0,0),n=Object(N["a"])(o,1),s=n[0],i=e.reserves.get(a).price;return new G.a(s).div(i)})),Object(K["a"])(this,"_liquidateCalculateSeizeTokens",(function(t,a,o){var n=e.reserves.get(t).price,s=e.reserves.get(a).price,i=e._getExchangeRate(a),c=new G.a(e.config.liquidationIncentive).times(n),r=new G.a(s).times(i),l=c.div(r);return l.times(o).abs()})),Object(K["a"])(this,"_getOutAmount",(function(t,a,o){var n,s=e.reserves.getValueWithBorrows(a).times(100),i=e.reserves.get(a).weight,c=e.reserves.get(o).weight,r=e.reserves.getValueWithBorrows(o).times(100),l=s.div(s.plus(t)).pow(i.div(c)),u=new G.a(1).minus(l);return n=r.times(u),n})),Object(K["a"])(this,"_getInAmount",(function(t,a,o){var n,s=e.reserves.getValueWithBorrows(a),i=e.reserves.get(a).weight,c=e.reserves.get(o).weight,r=e.reserves.getValueWithBorrows(o),l=r.div(r.minus(t)).pow(c.div(i));return n=l.minus(1).times(s),n})),Object(K["a"])(this,"_getSpotPrice",(function(t,a){var o=e.reserves.getValueWithBorrows(t).div(e.reserves.get(t).weight),n=e.reserves.getValueWithBorrows(a).div(e.reserves.get(a).weight),s=new G.a(1).div(new G.a(1).minus(e.fees.tradeFee.div(100)));return o.div(n).mul(s)})),Object(K["a"])(this,"_stabShare",(function(t){return t.mul(e.dynamicParams.stabPercentage).div(100)})),Object(K["a"])(this,"setPrices",(function(t){var a=e._getTokens();a.forEach((function(a){if(!t[a])throw{error:"Has no price for ".concat(a," token!")};e.reserves.setPrice(a,t[a])})),e._countWeights()})),Object(K["a"])(this,"_getTokens",(function(){return e.config.tokens.concat(e.config.stable)})),Object(K["a"])(this,"_addToStabFund",(function(t,a){e.stabFund[t]&&e.stabFund[t].value?e.stabFund[t].value=e.stabFund[t].value.plus(a):e.stabFund[t]={value:new G.a(a)}})),Object(K["a"])(this,"_addAccountDeposit",(function(t,a,o){var n=e.reserves.getValueWithBorrows(a),s=e.reserves.get(a).price,i=e._countShareToken(a,o,n);return e.accounts.addDeposit(t,a,o,i,s),e.reserves.addValue(a,o),i})),Object(K["a"])(this,"_removeAccountDeposit",(function(t,a,o,n){var s=e.reserves.get(a).price;e.accounts.removeDeposit(t,a,o,n,s),e.reserves.get(a).value=e.reserves.get(a).value.minus(o),e.sTokens[a]=e.sTokens[a].minus(n)})),Object(K["a"])(this,"_liquidateShareAmount",(function(t,a){var o=new G.a(t).times(e.reserves.getValueWithBorrows(a)).div(e.sTokens[a]);return{value:o,name:a}})),Object(K["a"])(this,"_countShareToken",(function(t,a,o){var n=0;return e.sTokens[t]?(n=new G.a(a).div(o).times(e.sTokens[t]),e.sTokens[t]=e.sTokens[t].plus(n)):(n=new G.a(a).sqrt(),e.sTokens[t]=n),n})),Object(K["a"])(this,"_countWeights",(function(){var t=e._getTokens();if(!t.length)return!1;e._countCapital();var a=e.reserves.getFullCapital();return t.forEach((function(t){e.reserves.get(t).weight=e.reserves.get(t).capital.times(100).div(a)})),!0})),Object(K["a"])(this,"_balanceWeights",(function(t,a){var o=e.reserves.get(t),n=e.reserves.get(a),s=o.weight.plus(n.weight),i=o.value.div(o.staked).ln();if(!0===i.abs().lt(.001))return!1;var c=o.price.div(n.price),r=o.staked.div(n.value).mul(c).mul(i),l=et(r),u=new G.a(l).div(i),d=G.a.div(u,u.plus(1)).mul(s),p=G.a.div(1,u.plus(1)).mul(s);return o.weight=d,n.weight=p,!0})),Object(K["a"])(this,"_countCapital",(function(){var t=e._getTokens();t.forEach((function(t){e.reserves.get(t).capital=e.reserves.getValueWithBorrows(t).times(e.reserves.get(t).price)}))})),Object(K["a"])(this,"getLiqudationMax",(function(t,a){return e._liquidateBorrowAllowed(t,a)})),Object(K["a"])(this,"_liquidateBorrowAllowed",(function(t,a){var o=e._checkBorrow(t,a,0,0),n=Object(N["a"])(o,2),s=(n[0],n[1]);if(0===s)return new G.a(0);var i=e.accounts.countBorrow(t,a,e.reserves.get(a).borrowIndex);return new G.a(e.dynamicParams.closeFactor).times(i)})),Object(K["a"])(this,"_getExchangeRate",(function(t){var a=e.reserves.get(t);return e.sTokens[t]?a.value.plus(a.totalBorrows).div(e.sTokens[t]):new G.a(0)})),Object(K["a"])(this,"_checkBorrow",(function(t,a,o,n){var s=e.accounts.get(t),i=e.collateralFactor;e._updateIndexes(a);var c=e._getTokens().map((function(c){var r=s.deposits[c]?s.deposits[c].share:new G.a(0),l=e.accounts.countBorrow(t,c,e.reserves.get(c).borrowIndex),u=e.reserves.get(c).price,d=e._getExchangeRate(c),p=new G.a(i).times(d).times(u),v=r.times(p).abs(),f=c===a?l.plus(o).times(u).plus(p.times(n)):l.times(u).abs();return[v,f]})).reduce((function(t,e){return[t[0].plus(e[0]),t[1].plus(e[1])]}),[new G.a(0),new G.a(0)]),r=Object(N["a"])(c,2),l=r[0],u=r[1];return s.sumCollateral=l,s.sumBorrowPlusEffects=u,l.gt(u)?[l.minus(u),0]:[0,u.minus(l)]})),Object(K["a"])(this,"_updateIndexesAll",(function(){e._getTokens().forEach((function(t){return e._updateIndexes(t)}))})),Object(K["a"])(this,"_updateAccountsIndex",(function(){Object.keys(e.accounts.all()).forEach((function(t){e._getTokens().forEach((function(a){e._checkBorrow(t,a,0,0)}))}))})),Object(K["a"])(this,"_updateIndexes",(function(t){var a=e.reserves.get(t),o=new G.a(e.day),n=a.prevDay;if(o===n)return 0;var s=a.value,i=a.totalBorrows,c=a.totalReserves;a.utilizationRate=e._utilizationRate(s,i,c);var r=a.borrowIndex,l=e._getBorrowRate(s,i,c);a.borrowRate=l.times(at),a.supplyRate=e._getSupplyRate(s,i,c).times(at);var u=o.minus(n),d=l.times(u),p=d.times(i),v=p.plus(i),f=e.reserveFactor.times(p).plus(c),b=d.times(r).plus(r);a.prevDay=o,a.borrowIndex=b,a.totalBorrows=v,a.totalReserves=f})),Object(K["a"])(this,"_utilizationRate",(function(t,e,a){return!e||e.eq(0)?new G.a(0):e.div(t.plus(e).minus(a))})),Object(K["a"])(this,"_getBorrowRate",(function(t,a,o){var n=e._utilizationRate(t,a,o);return n.times(e.dayMultiplier).plus(e.dayRate)})),Object(K["a"])(this,"_getSupplyRate",(function(t,a,o){var n=new G.a(1).minus(e.config.reserveFactor),s=e._getBorrowRate(t,a,o),i=s.times(n);return e._utilizationRate(t,a,o).times(i)})),Object(K["a"])(this,"_setParameters",(function(t){Object.assign(e.dynamicParams,t)})),Object(K["a"])(this,"_getPrices",(function(){var t,a=e._getTokens().filter((function(t){return-1===t.indexOf("s")})),o=(a.reduce((function(t,a,o){return Object(v["a"])(Object(v["a"])({},t),{},Object(K["a"])({},a,e.reserves.get(a).price))}),{}),{}),n=Object(U["a"])(a);try{for(n.s();!(t=n.n()).done;){var s=t.value;o[s]||(o[s]={});var i,c=Object(U["a"])(a);try{for(c.s();!(i=c.n()).done;){var r=i.value;s!==r&&(o[s][r]=e.tradePool(1,[r+"/"+s,1],1).value.div(1).toFixed(4))}}catch(l){c.e(l)}finally{c.f()}}}catch(l){n.e(l)}finally{n.f()}return o}))},nt=ot,st=(a("a630"),a("3ca3"),function t(){var e=this;Object(J["a"])(this,t),Object(K["a"])(this,"init",(function(t){e.tokens=Array.from(t.tokens),e.prices=Object.assign({},t.prices)})),Object(K["a"])(this,"getNewPrices",(function(){return e.tokens.forEach((function(t){e.prices[t]=new G.a(e.prices[t]).mul(e.rand_normal().plus(1))})),e.prices})),Object(K["a"])(this,"rand_normal",(function(){for(var t=new G.a(0),e=6,a=0;a<e;a+=1)t=t.plus(Math.random()).minus(.5);return t.div(e).div(4)}))}),it=st,ct=a("289d"),rt=(a("5abe"),a("4a7a")),lt=a.n(rt);window.pool=new nt,window.oracle=new it,o["a"].use(ct["a"]),o["a"].component("v-select",lt.a),o["a"].config.productionTip=!1,new o["a"]({router:L,store:H,render:function(t){return t(l)}}).$mount("#app")},caba:function(t,e,a){},db62:function(t,e,a){}});
//# sourceMappingURL=app.5a40f06f.js.map